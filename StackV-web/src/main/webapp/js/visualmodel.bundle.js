(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["visualmodel"],{

/***/ "./src/main/webapp/visual/icon.js":
/*!****************************************!*\
  !*** ./src/main/webapp/visual/icon.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getIcon;\nvar __ICON__ = {\n  'cloud': {\n    type: 'path',\n    d: 'M537.585 226.56C541.725 215.836 544 204.184 544 192c0-53.019-42.981-96-96-96-19.729 0-38.065 5.954-53.316 16.159C367.042 64.248 315.288 32 256 32c-88.366 0-160 71.634-160 160 0 2.728.07 5.439.204 8.133C40.171 219.845 0 273.227 0 336c0 79.529 64.471 144 144 144h368c70.692 0 128-57.308 128-128 0-61.93-43.983-113.586-102.415-125.44z',\n    transform: 'scale(0.07) translate(-300px, -250px)'\n  },\n  'server': {\n    type: 'path',\n    d: 'M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z',\n    transform: 'scale(0.07) translate(-260px, -250px)'\n  }\n};\n\nfunction getIcon(name) {\n  return __ICON__[name];\n}\n\n//# sourceURL=webpack:///./src/main/webapp/visual/icon.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/SVDragEvent.js":
/*!************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/SVDragEvent.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n/**\n * This class will try to prevent calling dragStart or dragEnd if the mouse DID NOT MOVE\n */\nvar SVDragEvent =\n/*#__PURE__*/\nfunction () {\n  function SVDragEvent(eventHandler) {\n    (0, _classCallCheck2.default)(this, SVDragEvent);\n    this.eventHandler = eventHandler;\n    this.dragStarted = false;\n    this.dragMoved = false;\n  }\n\n  (0, _createClass2.default)(SVDragEvent, [{\n    key: \"dragStartEvent\",\n    value: function dragStartEvent() {\n      var self = this;\n      return function () {\n        self.dragStarted = true;\n      };\n    }\n  }, {\n    key: \"dragMoveEvent\",\n    value: function dragMoveEvent() {\n      var self = this;\n      return function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (!self.dragMoved) {\n          // FIRST MOVE, TRIGGER DRAG_START\n          self.eventHandler.dragStart && self.eventHandler.dragStart.apply(this, args);\n          self.dragMoved = true;\n        }\n\n        self.eventHandler.dragMove && self.eventHandler.dragMove.apply(this, args);\n      };\n    }\n  }, {\n    key: \"dragEndEvent\",\n    value: function dragEndEvent() {\n      var self = this;\n      return function () {\n        if (self.dragStarted && self.dragMoved) {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          self.eventHandler.dragEnd && self.eventHandler.dragEnd.apply(this, args);\n        }\n\n        self.dragStarted = false;\n        self.dragMoved = false;\n      };\n    }\n  }]);\n  return SVDragEvent;\n}();\n\nvar _default = SVDragEvent;\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/SVDragEvent.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/layout-persistent/consts.js":
/*!*************************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/layout-persistent/consts.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LAYOUT_PERSISTENT_KEYS = exports.LP_LOCALSTORAGE_KEY = void 0;\nvar LP_LOCALSTORAGE_KEY = '__UI_DATA__';\n/**\n * Would need to save THESE KEYS ONLY\n *\n * @type {Array<string>}\n */\n\nexports.LP_LOCALSTORAGE_KEY = LP_LOCALSTORAGE_KEY;\nvar LAYOUT_PERSISTENT_KEYS = ['x', 'y', 'dx', 'dy', 'vx', 'vy', 'fx', 'fy'];\nexports.LAYOUT_PERSISTENT_KEYS = LAYOUT_PERSISTENT_KEYS;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/layout-persistent/consts.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/layout-persistent/layout-persistent.js":
/*!************************************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/layout-persistent/layout-persistent.js ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireWildcard = __webpack_require__(/*! @babel/runtime/helpers/interopRequireWildcard */ \"./node_modules/@babel/runtime/helpers/interopRequireWildcard.js\");\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _stringify = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/core-js/json/stringify */ \"./node_modules/@babel/runtime/core-js/json/stringify.js\"));\n\nvar _keys = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/core-js/object/keys */ \"./node_modules/@babel/runtime/core-js/object/keys.js\"));\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\"));\n\nvar d3 = _interopRequireWildcard(__webpack_require__(/*! d3 */ \"./node_modules/d3/index.js\"));\n\nvar _lodash = _interopRequireDefault(__webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\"));\n\nvar _consts = __webpack_require__(/*! ./consts */ \"./src/main/webapp/visual/visual-model/layout-persistent/consts.js\");\n\nvar LZString = _interopRequireWildcard(__webpack_require__(/*! lz-string */ \"./node_modules/lz-string/libs/lz-string.js\"));\n\n/**\n * This class would take control of all the Layout Persistent stuff\n */\nvar LayoutPersistent =\n/*#__PURE__*/\nfunction () {\n  function LayoutPersistent() {\n    (0, _classCallCheck2.default)(this, LayoutPersistent);\n    (0, _defineProperty2.default)(this, \"persistentData\", {\n      expandInfo: [],\n      nodeInfo: {},\n      zoom: {}\n    });\n    (0, _defineProperty2.default)(this, \"postRenderExpandNodeWrapperList\", void 0);\n  }\n\n  (0, _createClass2.default)(LayoutPersistent, [{\n    key: \"backup\",\n\n    /**\n     * receive a visual model instance and create backup\n     * @param {VisualModel} visualModel - visual model instance\n     */\n    value: function backup(visualModel) {\n      var dataModel = visualModel.dataModel;\n      this.persistentData.expandInfo = (0, _keys.default)(dataModel.expandInfo);\n\n      for (var key in dataModel.data) {\n        if (dataModel.data.hasOwnProperty(key)) {\n          var nodePersistentData = getPersistentData(dataModel.data[key]);\n\n          if (nodePersistentData) {\n            this.persistentData.nodeInfo[key] = nodePersistentData;\n          }\n        }\n      } // backup zoom level\n\n\n      this.persistentData.zoom = d3.zoomTransform(visualModel.svg.root.node());\n    }\n    /**\n     * Apply backup data into current visual model and data model\n     * @param {VisualModel} visualModel - visual model instance\n     */\n\n  }, {\n    key: \"apply\",\n    value: function apply(visualModel) {\n      var _this = this;\n\n      var dataModel = visualModel.dataModel;\n      var staticExpandNodeWrapperList = [];\n      this.postRenderExpandNodeWrapperList = [];\n      /**\n       * If New Nodes being added in Expanded Hulls\n       * We have no Coordinate backup for New Nodes\n       * And these New Nodes will float everywhere\n       *\n       * In order to prevent this, check if all nodes inside a Expanded Node have Coordinate Backup\n       * If not, then remove all backup Coordinate of children nodes under that Expanded Node\n       *\n       * Node being treated will EXPAND in view layer, since it need to prepare space\n       *\n       * REVERSE TRAVEL prevent UI being messed up\n       */\n\n      for (var idx = this.persistentData.expandInfo.length - 1; idx >= 0; idx -= 1) {\n        var nodeId = this.persistentData.expandInfo[idx];\n        var nodeWrapper = dataModel.nodeFetcher(nodeId, true);\n\n        if (nodeWrapper) {\n          if (nodeWrapper.metadata) {\n            var childrenIdList = dataModel.childrenElementIdList(nodeWrapper.metadata);\n            var haveAllBackup = true;\n\n            for (var i = 0; i < childrenIdList.length; i++) {\n              var innerNodeId = childrenIdList[i];\n\n              if (!this.persistentData.nodeInfo.hasOwnProperty(innerNodeId)) {\n                // if one of all has NO backup\n                haveAllBackup = false;\n                break;\n              }\n            }\n\n            if (!haveAllBackup) {\n              childrenIdList.forEach(function (innerNodeId) {\n                return delete _this.persistentData.nodeInfo[innerNodeId];\n              });\n              delete this.persistentData.nodeInfo[nodeId];\n              this.postRenderExpandNodeWrapperList.push(nodeWrapper);\n            } else {\n              staticExpandNodeWrapperList.push(nodeWrapper);\n            }\n          }\n        }\n      }\n\n      for (var key in this.persistentData.nodeInfo) {\n        if (this.persistentData.nodeInfo.hasOwnProperty(key)) {\n          if (dataModel.data.hasOwnProperty(key)) {\n            _lodash.default.assign(dataModel.data[key], this.persistentData.nodeInfo[key]);\n          }\n        }\n      }\n\n      staticExpandNodeWrapperList.forEach(function (nodeWrapper) {\n        return dataModel.expandNode(nodeWrapper);\n      });\n    }\n    /**\n     * Expand nodes after first rendering\n     *\n     * @param {VisualModel} visualModel - visual model instance\n     */\n\n  }, {\n    key: \"applyPostRenderExpansion\",\n    value: function applyPostRenderExpansion(visualModel) {\n      var _this2 = this;\n\n      visualModel.renderQueue.push({\n        type: 'POST_RENDER_EXPANSION',\n        run: function run() {\n          _this2.postRenderExpandNodeWrapperList.forEach(function (nodeWrapper) {\n            return visualModel.toggleNode(nodeWrapper, true);\n          });\n\n          _this2.postRenderExpandNodeWrapperList = [];\n        }\n      });\n    }\n    /**\n     * Restore zoom level into current visualModel\n     * @param {VisualModel} visualModel - visual model instance\n     */\n\n  }, {\n    key: \"applyZoomLevel\",\n    value: function applyZoomLevel(visualModel) {\n      console.log('restore');\n      visualModel.svg.root = visualModel.svg.root.call(visualModel.zoom.transform, d3.zoomIdentity.translate(this.persistentData.zoom.x, this.persistentData.zoom.y).scale(this.persistentData.zoom.k));\n      visualModel.svg.container.attr('transform', \"translate(\".concat(this.persistentData.zoom.x, \", \").concat(this.persistentData.zoom.y, \") scale(\").concat(this.persistentData.zoom.k, \")\"));\n    }\n    /**\n     * Export current backup into COMPRESSED STRING or JSON string\n     * @param {boolean} compress - Need to compress using LZW or not\n     * @returns {string}\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse() {\n      var compress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var backupData = (0, _stringify.default)(this.persistentData);\n\n      if (compress) {\n        backupData = LZString.compress(backupData);\n      }\n\n      return backupData;\n    }\n    /**\n     * Read the local persistent data\n     * @param {string} backupData\n     * @param {boolean} compress\n     */\n\n  }, {\n    key: \"read\",\n    value: function read(backupData) {\n      var compress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (compress) {\n        backupData = LZString.decompress(backupData);\n      }\n\n      var parseResult = JSON.parse(backupData);\n\n      if (this.validate(parseResult)) {\n        this.persistentData = parseResult;\n      }\n    }\n    /**\n     * Validate if parse result is legal\n     * @param {object} parseResult - parse result\n     */\n\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      return true;\n    }\n  }]);\n  return LayoutPersistent;\n}();\n/**\n * parse persistent data\n *\n * @param {object} node - node reference\n * @returns {object}\n */\n\n\nfunction getPersistentData(node) {\n  var persistentData = {};\n\n  for (var key in node) {\n    if (node.hasOwnProperty(key)) {\n      if (_consts.LAYOUT_PERSISTENT_KEYS.indexOf(key) !== -1) {\n        persistentData[key] = node[key];\n      }\n    }\n  }\n\n  return (0, _keys.default)(persistentData).length > 0 ? persistentData : null;\n}\n\nvar _default = LayoutPersistent;\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/layout-persistent/layout-persistent.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/node-highlighter/highlighter.js":
/*!*****************************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/node-highlighter/highlighter.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireWildcard = __webpack_require__(/*! @babel/runtime/helpers/interopRequireWildcard */ \"./node_modules/@babel/runtime/helpers/interopRequireWildcard.js\");\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\"));\n\nvar d3 = _interopRequireWildcard(__webpack_require__(/*! d3 */ \"./node_modules/d3/index.js\"));\n\n/**\n * Highlight node by their Node ID\n */\nvar NodeHighlighter =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Reference to parent visual model\n   * @type {VisualModel}\n   */\n\n  /**\n   * Record travel history of each search, prevent stack overflow\n   * @type {Array<string>}\n   */\n\n  /**\n   * The current Global Highlight Node ID\n   * @type {string}\n   */\n\n  /**\n   * Create new instance for the highlighter\n   * @param {VisualModel} visualModel - parent visualModel\n   */\n  function NodeHighlighter(visualModel) {\n    (0, _classCallCheck2.default)(this, NodeHighlighter);\n    (0, _defineProperty2.default)(this, \"visualModel\", void 0);\n    (0, _defineProperty2.default)(this, \"visitHistory\", void 0);\n    (0, _defineProperty2.default)(this, \"currentHighlightId\", void 0);\n    this.visualModel = visualModel;\n  }\n  /**\n   * Toggle a global highlight for a node, ONLY ONE CAN EXIST AT A TIME\n   * @param {string} nodeId - node REAL id\n   */\n\n\n  (0, _createClass2.default)(NodeHighlighter, [{\n    key: \"toggleGlobal\",\n    value: function toggleGlobal() {\n      var nodeId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentHighlightId;\n\n      if (nodeId !== this.currentHighlightId) {\n        this.hide(this.currentHighlightId);\n        this.currentHighlightId = nodeId;\n        this.show(this.currentHighlightId);\n      }\n    }\n    /**\n     * Toggle a global highlight for a node\n     * @param {string} nodeId - node REAL id\n     */\n\n  }, {\n    key: \"toggle\",\n    value: function toggle(nodeId) {\n      var targetNode = this.searchNode(nodeId);\n\n      if (targetNode.classed(\"user-highlight\")) {\n        this.hide(nodeId);\n      } else {\n        this.show(nodeId);\n      }\n    }\n    /**\n     * Highlight a node with nodeId\n     * @param {string} nodeId - node REAL id\n     */\n\n  }, {\n    key: \"show\",\n    value: function show() {\n      var nodeId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentHighlightId;\n      var targetNode = this.searchNode(nodeId);\n\n      if (targetNode) {\n        targetNode.classed(\"user-highlight\", true);\n      }\n    }\n    /**\n     * Dismiss a highlight with nodeId\n     * @param {string} nodeId - node REAL id\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var nodeId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentHighlightId;\n      var targetNode = this.searchNode(nodeId);\n\n      if (targetNode) {\n        targetNode.classed(\"user-highlight\", false);\n      }\n    }\n    /**\n     * Find HTML Node for highlight purpose\n     * @param {string} nodeId - node REAL id\n     * @returns {object} D3 selction\n     */\n\n  }, {\n    key: \"searchNode\",\n    value: function searchNode(nodeId) {\n      // Find Hull first\n      if (this.visualModel.dataModel.isNodeExpanded(nodeId)) {\n        var returnNode;\n        this.visualModel.svg.hulls.each(function (d) {\n          if (returnNode) return true;\n\n          if (d.id === nodeId) {\n            // FOUND\n            returnNode = d3.select(this);\n          }\n        });\n        if (returnNode) return returnNode;\n      } else {\n        this.visitHistory = [];\n        return d3.select(this.searchNode_helper(nodeId));\n      }\n    }\n    /**\n     * RECURSION HELPER Find HTML Node for highlight purpose\n     * @param {string} nodeId - node REAL id\n     * @returns {HTMLElement} HTML Element\n     */\n\n  }, {\n    key: \"searchNode_helper\",\n    value: function searchNode_helper(nodeId) {\n      if (this.visitHistory.indexOf(nodeId) === -1) {\n        this.visitHistory.push(nodeId); // search in NODE_LIST\n\n        var returnNode;\n        this.visualModel.svg.nodes.each(function (d) {\n          if (returnNode) return true;\n\n          if (d.metadata && d.metadata.id === nodeId) {\n            // FOUND\n            returnNode = d3.select(this).node();\n          }\n        });\n        if (returnNode) return returnNode; // search in NETWORK SWITCH\n\n        var nodeData = this.visualModel.dataModel.nodeFetcher(nodeId, true);\n\n        if (nodeData) {\n          var aliasId = nodeData.id,\n              data = nodeData.metadata;\n\n          if (aliasId) {\n            this.visitHistory.push(aliasId);\n            var nodeElement = document.getElementById(\"switch-\".concat(aliasId));\n\n            if (nodeElement) {\n              return nodeElement;\n            } else {\n              nodeElement = document.getElementById(\"switch-port-\".concat(aliasId));\n\n              if (nodeElement) {\n                return nodeElement;\n              } else {\n                if (data.hasOwnProperty(\"directParentList\")) {\n                  // Reverse travel\n                  for (var i = data[\"directParentList\"].length - 1; i >= 0; i--) {\n                    var realNodeId = data[\"directParentList\"][i];\n\n                    var _nodeElement = this.searchNode_helper(realNodeId);\n\n                    if (_nodeElement) return _nodeElement;\n                  }\n\n                  return this.searchNode_helper(data[\"isAlias\"]);\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return false;\n    }\n  }]);\n  return NodeHighlighter;\n}();\n\nvar _default = NodeHighlighter;\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/node-highlighter/highlighter.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/ui-popover/node-detail/controller.js":
/*!**********************************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/ui-popover/node-detail/controller.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\"));\n\nvar _nodeSwitch = _interopRequireDefault(__webpack_require__(/*! ./node-switch */ \"./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-switch.js\"));\n\nvar _nodeServices = _interopRequireDefault(__webpack_require__(/*! ./node-services */ \"./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-services.js\"));\n\n/**\n * Manage OPEN & CLOSE of NodeDetail\n */\nvar NodeDetailController =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Record open and close list for PORTS\n   * @type {Object.<string, NodeSwitch>}\n   */\n\n  /**\n   * record open and close list for SERVICES\n   * @type {Object.<string, NodeServices>}\n   */\n\n  /**\n   * SVG elements\n   * @type {object}\n   */\n\n  /**\n   * Node Fetcher Function\n   * @type {Function}\n   */\n\n  /**\n   * parent visual Model\n   * @type {VisualModel}\n   */\n\n  /**\n   * D3 Element for Network Switch Container\n   * @type {object}\n   */\n\n  /**\n   * @param {VisualModel} visualModel - parent visual Model\n   */\n  function NodeDetailController(visualModel) {\n    (0, _classCallCheck2.default)(this, NodeDetailController);\n    (0, _defineProperty2.default)(this, \"switchList\", {});\n    (0, _defineProperty2.default)(this, \"serviceList\", {});\n    (0, _defineProperty2.default)(this, \"svg\", void 0);\n    (0, _defineProperty2.default)(this, \"nodeFetcher\", void 0);\n    (0, _defineProperty2.default)(this, \"visualModel\", void 0);\n    (0, _defineProperty2.default)(this, \"switchContainer\", void 0);\n    this.visualModel = visualModel;\n    this.svg = visualModel.svg;\n    this.nodeFetcher = visualModel.dataModel.nodeFetcher; // create node\n\n    var container = this.svg.outerWrapper.append('div').attr('class', 'popover-container');\n    this.switchContainer = container.append('div').attr('class', 'popover-switches');\n  }\n  /**\n   * Show network switch popover for nodeId\n   * @param {string} nodeId - nodeId string\n   */\n\n\n  (0, _createClass2.default)(NodeDetailController, [{\n    key: \"showNetworkSwitch\",\n    value: function showNetworkSwitch(nodeId) {\n      if (!this.switchList.hasOwnProperty(nodeId)) {\n        var networkSwitch = new _nodeSwitch.default(nodeId, this);\n        networkSwitch.show();\n        this.switchList[nodeId] = networkSwitch;\n      }\n    }\n    /**\n     * Hide network switch popover for nodeId\n     * @param {string} nodeId - nodeId string\n     */\n\n  }, {\n    key: \"hideNetworkSwitch\",\n    value: function hideNetworkSwitch(nodeId) {\n      if (!this.switchList.hasOwnProperty(nodeId)) {\n        var networkSwitch = new _nodeSwitch.default(nodeId, this);\n        networkSwitch.hide();\n      }\n    }\n    /**\n     * Mark network switch popover HIDDEN for nodeId\n     * @param {string} nodeId - nodeId string\n     */\n\n  }, {\n    key: \"markSwitchHidden\",\n    value: function markSwitchHidden(nodeId) {\n      if (this.switchList.hasOwnProperty(nodeId)) {\n        delete this.switchList[nodeId];\n      }\n    }\n    /**\n     * Batch hide all current network switch\n     */\n\n  }, {\n    key: \"hideAllNetworkSwitch\",\n    value: function hideAllNetworkSwitch() {\n      for (var nodeId in this.switchList) {\n        if (this.switchList.hasOwnProperty(nodeId)) {\n          this.switchList[nodeId].hide();\n        }\n      }\n    }\n    /**\n     * Show services dialog popover for nodeId\n     * @param {string} nodeId - nodeId string\n     */\n\n  }, {\n    key: \"showServicesDialog\",\n    value: function showServicesDialog(nodeId) {\n      if (!this.serviceList.hasOwnProperty(nodeId)) {\n        var servicesDialog = new _nodeServices.default(nodeId, this);\n        servicesDialog.show();\n        this.serviceList[nodeId] = servicesDialog;\n      }\n    }\n    /**\n     * Hide services dialog popover for nodeId\n     * @param {string} nodeId - nodeId string\n     */\n\n  }, {\n    key: \"hideServicesDialog\",\n    value: function hideServicesDialog(nodeId) {\n      if (!this.serviceList.hasOwnProperty(nodeId)) {\n        var servicesDialog = new _nodeServices.default(nodeId, this);\n        servicesDialog.hide();\n      }\n    }\n    /**\n     * Mark services dialog popover HIDDEN for nodeId\n     * @param {string} nodeId - nodeId string\n     */\n\n  }, {\n    key: \"markServicesDialogHidden\",\n    value: function markServicesDialogHidden(nodeId) {\n      if (this.serviceList.hasOwnProperty(nodeId)) {\n        delete this.serviceList[nodeId];\n      }\n    }\n    /**\n     * Batch hide all current Services Dialog\n     */\n\n  }, {\n    key: \"hideAllServicesDialog\",\n    value: function hideAllServicesDialog() {\n      for (var nodeId in this.serviceList) {\n        if (this.serviceList.hasOwnProperty(nodeId)) {\n          this.serviceList[nodeId].hide();\n        }\n      }\n    }\n    /**\n     * Batch hide Services Dialog & Network Switch\n     */\n\n  }, {\n    key: \"hideAllPopover\",\n    value: function hideAllPopover() {\n      this.hideAllNetworkSwitch();\n      this.hideAllServicesDialog();\n    }\n    /**\n     * Show all available dialogs for node\n     * @param {string} nodeId - nodeId string\n     */\n\n  }, {\n    key: \"show\",\n    value: function show(nodeId) {\n      this.showNetworkSwitch(nodeId);\n      this.showServicesDialog(nodeId);\n    }\n    /**\n     * Hide all available dialogs for node\n     * @param {string} nodeId - nodeId string\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide(nodeId) {\n      this.hideNetworkSwitch(nodeId);\n      this.hideServicesDialog(nodeId);\n    }\n  }]);\n  return NodeDetailController;\n}();\n\nvar _default = NodeDetailController;\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/ui-popover/node-detail/controller.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-detail.js":
/*!***********************************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-detail.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\"));\n\nvar _controller = _interopRequireDefault(__webpack_require__(/*! ./controller */ \"./src/main/webapp/visual/visual-model/ui-popover/node-detail/controller.js\"));\n\n/**\n * ABSTRACT CLASS\n *\n * Manage Node Detail popover(s)\n */\nvar NodeDetail =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Linked nodeId\n   * @type {string}\n   */\n\n  /**\n   * Correspondent Hull Data\n   * @type {object}\n   */\n\n  /**\n   * Correspondent Node data\n   * @type {object}\n   */\n\n  /**\n   * Linked Controller\n   * @type {NodeDetailController}\n   */\n\n  /**\n   * D3 Element for the Dialog Container\n   */\n\n  /**\n   * Construct data\n   *\n   * @param {string} nodeId - linked REAL node id\n   * @param {NodeDetailController} controller - parent controller instance\n   */\n  function NodeDetail(nodeId, controller) {\n    var _this = this;\n\n    (0, _classCallCheck2.default)(this, NodeDetail);\n    (0, _defineProperty2.default)(this, \"nodeId\", void 0);\n    (0, _defineProperty2.default)(this, \"hullData\", void 0);\n    (0, _defineProperty2.default)(this, \"nodeData\", void 0);\n    (0, _defineProperty2.default)(this, \"controller\", void 0);\n    (0, _defineProperty2.default)(this, \"container\", void 0);\n    this.nodeId = nodeId;\n    this.controller = controller;\n    this.container = null;\n    this.controller.svg.hulls.each(function (data) {\n      if (data.id === _this.nodeId) {\n        _this.hullData = data;\n        _this.nodeData = _this.controller.nodeFetcher(data.id, true);\n      }\n    });\n\n    if ((this instanceof NodeDetail ? this.constructor : void 0) === NodeDetail) {\n      throw new TypeError('NodeDetail is a abstract class, DO NOT CONSTRUCT');\n    }\n  }\n  /**\n   * Show port popover for nodeId\n   * Construct HTML dialog\n   *\n   * @public\n   */\n\n\n  (0, _createClass2.default)(NodeDetail, [{\n    key: \"show\",\n    value: function show() {\n      var _this2 = this;\n\n      if (!this.container) {\n        if (this.dataValid()) {\n          // Ask for dialog coordinate\n          var absPoint = this.popoverCoordinate();\n          this.container = this.controller.switchContainer.append('div').attr('id', this.containerId()).attr('class', this.containerClass()).style('left', \"\".concat(absPoint.x, \"px\")).style('top', \"\".concat(absPoint.y, \"px\")).style('min-width', this.containerWidth());\n          var buttonContainer = this.container.append('div').attr('class', 'ui-buttons');\n          buttonContainer.append('div').attr('class', 'close-x').on('click', function () {\n            _this2.hide(_this2.nodeId);\n          });\n          var content = this.container.append('div').attr('class', this.contentClass());\n          this.prepareContent(content); // Done constructing, show it\n\n          this.container.transition().duration(250).style('opacity', 1);\n        }\n      }\n    }\n    /**\n     * Show port popover for nodeId\n     * WARN: NEED TO REPORT AS HIDDEN to controller\n     *\n     * @abstract\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this3 = this;\n\n      if (this.container) {\n        this.container.transition().duration(250).style('opacity', 0).on('end', function () {\n          return _this3.container.remove();\n        });\n      }\n    }\n    /**\n     * Expecting a absolute (abs to div.stackv-graphic) coordinate (TOP-LEFT POINT) for the dialog\n     *\n     * @abstract\n     * @protected\n     * @returns {{ x: Number, y: Number }} The xy coordinate\n     */\n\n  }, {\n    key: \"popoverCoordinate\",\n    value: function popoverCoordinate() {\n      throw new Error('Abstract function NOT OVERRIDDEN!!');\n    }\n  }, {\n    key: \"containerId\",\n\n    /**\n     * Expecting a HTML unique ID for the dialog container\n     * Should contain aliasId\n     *\n     * @example\n     * return `switch-${aliasId}`;\n     * @example\n     * return `services-${aliasId}`;\n     *\n     * @abstract\n     * @returns {string} dialog container ID\n     */\n    value: function containerId() {\n      throw new Error('Abstract function NOT OVERRIDDEN!!');\n    }\n  }, {\n    key: \"containerClass\",\n\n    /**\n     * Expecting a HTML className for the dialog container\n     *\n     * @example\n     * return 'switch-container';\n     *\n     * @abstract\n     * @protected\n     * @returns {string} dialog className\n     */\n    value: function containerClass() {\n      throw new Error('Abstract function NOT OVERRIDDEN!!');\n    }\n  }, {\n    key: \"contentClass\",\n\n    /**\n     * Expecting a Minimum Width for the CONTENT wrapper inside dialog container\n     *\n     * @example\n     * return 'switch-ports';\n     *\n     * @abstract\n     * @protected\n     * @returns {string} className for CONTENT wrapper\n     */\n    value: function contentClass() {\n      throw new Error('Abstract function NOT OVERRIDDEN!!');\n    }\n    /**\n     * Expecting a Minimum Width STRING for the dialog container\n     *\n     * @example\n     * return '150px';\n     *\n     * @abstract\n     * @protected\n     * @returns {string} min-width property value\n     */\n\n  }, {\n    key: \"containerWidth\",\n    value: function containerWidth() {\n      throw new Error('Abstract function NOT OVERRIDDEN!!');\n    }\n    /**\n     * Verify if the hullData and nodeData is valid for creating the dialog\n     *\n     * @abstract\n     * @protected\n     * @returns {boolean} this.hullData this.nodeData VALID or NOT\n     */\n\n  }, {\n    key: \"dataValid\",\n    value: function dataValid() {\n      throw new Error('Abstract function NOT OVERRIDDEN!!');\n    }\n    /**\n     * APPEND new children into the content container\n     *\n     * @param {object} content - D3 selection result\n     * @abstract\n     * @protected\n     */\n\n  }, {\n    key: \"prepareContent\",\n    value: function prepareContent(content) {\n      throw new Error('Abstract function NOT OVERRIDDEN!!');\n    }\n  }]);\n  return NodeDetail;\n}();\n\nvar _default = NodeDetail;\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-detail.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-services.js":
/*!*************************************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-services.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/get.js\"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\nvar _nodeDetail = _interopRequireDefault(__webpack_require__(/*! ./node-detail */ \"./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-detail.js\"));\n\nvar NodeServices =\n/*#__PURE__*/\nfunction (_NodeDetail) {\n  (0, _inherits2.default)(NodeServices, _NodeDetail);\n\n  function NodeServices() {\n    (0, _classCallCheck2.default)(this, NodeServices);\n    return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(NodeServices).apply(this, arguments));\n  }\n\n  (0, _createClass2.default)(NodeServices, [{\n    key: \"popoverCoordinate\",\n\n    /** @override */\n    value: function popoverCoordinate() {\n      var pathRawData = this.hullData['__path_raw__'];\n      var xPoints = pathRawData.map(function (d) {\n        return d[0];\n      });\n      var yPoints = pathRawData.map(function (d) {\n        return d[1];\n      });\n      var minX = Math.min.apply(null, xPoints);\n      var maxX = Math.max.apply(null, xPoints);\n      var zoomLevel = d3.zoomTransform(this.controller.svg.root.node());\n      var xMiddle = (minX + maxX) / 2;\n      var topY = Math.min.apply(null, yPoints) - 45 / zoomLevel.k;\n      var relativePoint = {\n        x: xMiddle,\n        y: topY\n      };\n      return {\n        x: relativePoint.x * zoomLevel.k + zoomLevel.x,\n        y: relativePoint.y * zoomLevel.k + zoomLevel.y\n      };\n    }\n  }, {\n    key: \"containerId\",\n\n    /** @override */\n    value: function containerId() {\n      return \"services-\".concat(this.nodeData.id);\n    }\n    /** @override */\n\n  }, {\n    key: \"containerClass\",\n    value: function containerClass() {\n      return 'services-container';\n    }\n    /** @override */\n\n  }, {\n    key: \"contentClass\",\n    value: function contentClass() {\n      return 'services-ports';\n    }\n    /** @override */\n\n  }, {\n    key: \"containerWidth\",\n    value: function containerWidth() {\n      return \"\".concat(this.nodeData.metadata['hasService'].length * 39 + 5, \"px\");\n    }\n    /** @override */\n\n  }, {\n    key: \"dataValid\",\n    value: function dataValid() {\n      return this.hullData.hasOwnProperty('__path_raw__') && this.nodeData && this.nodeData.metadata && this.nodeData.metadata.hasOwnProperty('hasService') && this.nodeData.metadata['hasService'].length > 0;\n    }\n    /** @override */\n\n  }, {\n    key: \"prepareContent\",\n    value: function prepareContent(content) {\n      var _this = this;\n\n      this.nodeData.metadata['hasService'].forEach(function (portId) {\n        var _this$controller$node = _this.controller.nodeFetcher(portId, true),\n            aliasPortId = _this$controller$node.id,\n            portData = _this$controller$node.metadata;\n\n        var url = '/StackV-web/img/circle-o.svg';\n        content.append('img').attr('id', \"service-node-\".concat(aliasPortId)).attr('src', url).on('contextmenu', function () {\n          console.log(portData);\n          d3.event.preventDefault();\n          d3.event.stopPropagation();\n        }); // .on('mouseenter', () => console.log(portData))\n        // .on('mouseleave', () => console.log(portData));\n      });\n    }\n    /** @override */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.controller.markServicesDialogHidden(this.nodeId);\n      (0, _get2.default)((0, _getPrototypeOf2.default)(NodeServices.prototype), \"hide\", this).call(this);\n    }\n  }]);\n  return NodeServices;\n}(_nodeDetail.default);\n\nvar _default = NodeServices;\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-services.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-switch.js":
/*!***********************************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-switch.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/get.js\"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\nvar _nodeDetail = _interopRequireDefault(__webpack_require__(/*! ./node-detail */ \"./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-detail.js\"));\n\nvar NodeSwitch =\n/*#__PURE__*/\nfunction (_NodeDetail) {\n  (0, _inherits2.default)(NodeSwitch, _NodeDetail);\n\n  function NodeSwitch() {\n    (0, _classCallCheck2.default)(this, NodeSwitch);\n    return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(NodeSwitch).apply(this, arguments));\n  }\n\n  (0, _createClass2.default)(NodeSwitch, [{\n    key: \"popoverCoordinate\",\n\n    /** @override */\n    value: function popoverCoordinate() {\n      var pathRawData = this.hullData['__path_raw__'];\n      var xPoints = pathRawData.map(function (d) {\n        return d[0];\n      });\n      var yPoints = pathRawData.map(function (d) {\n        return d[1];\n      });\n      var minX = Math.min.apply(null, xPoints);\n      var maxX = Math.max.apply(null, xPoints);\n      var zoomLevel = d3.zoomTransform(this.controller.svg.root.node());\n      var xMiddle = (minX + maxX) / 2;\n      var bottomY = Math.max.apply(null, yPoints) + 5 / zoomLevel.k;\n      var relativePoint = {\n        x: xMiddle,\n        y: bottomY\n      };\n      return {\n        x: relativePoint.x * zoomLevel.k + zoomLevel.x,\n        y: relativePoint.y * zoomLevel.k + zoomLevel.y\n      };\n    }\n  }, {\n    key: \"containerId\",\n\n    /** @override */\n    value: function containerId() {\n      return \"switch-\".concat(this.nodeData.id);\n    }\n    /** @override */\n\n  }, {\n    key: \"containerClass\",\n    value: function containerClass() {\n      return 'switch-container';\n    }\n    /** @override */\n\n  }, {\n    key: \"contentClass\",\n    value: function contentClass() {\n      return 'switch-ports';\n    }\n    /** @override */\n\n  }, {\n    key: \"containerWidth\",\n    value: function containerWidth() {\n      return \"\".concat(this.nodeData.metadata['hasBidirectionalPort'].length * 35, \"px\");\n    }\n    /** @override */\n\n  }, {\n    key: \"dataValid\",\n    value: function dataValid() {\n      return this.hullData.hasOwnProperty('__path_raw__') && this.nodeData && this.nodeData.metadata && this.nodeData.metadata.hasOwnProperty('hasBidirectionalPort') && this.nodeData.metadata['hasBidirectionalPort'].length > 0;\n    }\n    /** @override */\n\n  }, {\n    key: \"prepareContent\",\n    value: function prepareContent(content) {\n      var _this = this;\n\n      this.nodeData.metadata['hasBidirectionalPort'].forEach(function (portId) {\n        var _this$controller$node = _this.controller.nodeFetcher(portId, true),\n            aliasPortId = _this$controller$node.id,\n            portData = _this$controller$node.metadata;\n\n        var portAvailable = portData.hasOwnProperty('isAlias');\n        var url = portAvailable ? '/StackV-web/img/rj45_on.svg' : '/StackV-web/img/rj45_off.svg';\n        var portElement = content.append('img').attr('id', \"switch-port-\".concat(aliasPortId)).attr('src', url).style('opacity', function () {\n          return portAvailable ? '1' : '0.35';\n        }).on('contextmenu', function () {\n          console.log(portData);\n          d3.event.preventDefault();\n          d3.event.stopPropagation();\n        });\n\n        if (portAvailable) {\n          portElement.on('mouseenter', function () {\n            return _this.controller.visualModel.highlighter.show(portData['isAlias']);\n          }).on('mouseleave', function () {\n            return _this.controller.visualModel.highlighter.hide(portData['isAlias']);\n          });\n        }\n      });\n    }\n    /** @override */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.controller.markSwitchHidden(this.nodeId);\n      (0, _get2.default)((0, _getPrototypeOf2.default)(NodeSwitch.prototype), \"hide\", this).call(this);\n    }\n  }]);\n  return NodeSwitch;\n}(_nodeDetail.default);\n\nvar _default = NodeSwitch;\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/ui-popover/node-detail/node-switch.js?");

/***/ }),

/***/ "./src/main/webapp/visual/visual-model/visual-model.js":
/*!*************************************************************!*\
  !*** ./src/main/webapp/visual/visual-model/visual-model.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireWildcard = __webpack_require__(/*! @babel/runtime/helpers/interopRequireWildcard */ \"./node_modules/@babel/runtime/helpers/interopRequireWildcard.js\");\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _getIterator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/core-js/get-iterator */ \"./node_modules/@babel/runtime/core-js/get-iterator.js\"));\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\"));\n\nvar d3 = _interopRequireWildcard(__webpack_require__(/*! d3 */ \"./node_modules/d3/index.js\"));\n\nvar _clipbook = __webpack_require__(/*! ../../portal/clipbook */ \"./src/main/webapp/portal/clipbook.js\");\n\nvar _dataModel = _interopRequireDefault(__webpack_require__(/*! ../data-model/data-model */ \"./src/main/webapp/visual/data-model/data-model.js\"));\n\nvar _icon = _interopRequireDefault(__webpack_require__(/*! ../icon */ \"./src/main/webapp/visual/icon.js\"));\n\nvar _SVDragEvent = _interopRequireDefault(__webpack_require__(/*! ./SVDragEvent */ \"./src/main/webapp/visual/visual-model/SVDragEvent.js\"));\n\nvar _layoutPersistent = _interopRequireDefault(__webpack_require__(/*! ./layout-persistent/layout-persistent */ \"./src/main/webapp/visual/visual-model/layout-persistent/layout-persistent.js\"));\n\nvar _consts = __webpack_require__(/*! ./layout-persistent/consts */ \"./src/main/webapp/visual/visual-model/layout-persistent/consts.js\");\n\nvar _controller = _interopRequireDefault(__webpack_require__(/*! ./ui-popover/node-detail/controller */ \"./src/main/webapp/visual/visual-model/ui-popover/node-detail/controller.js\"));\n\nvar _highlighter = _interopRequireDefault(__webpack_require__(/*! ./node-highlighter/highlighter */ \"./src/main/webapp/visual/visual-model/node-highlighter/highlighter.js\"));\n\nvar $detailsModal = $(\"#details-modal\");\nvar NODE_COLOR = d3.scaleOrdinal([\"#63a4ff\"]);\nvar HULL_COLOR = d3.scaleOrdinal([\"rgba(26, 35, 126, 0.85)\"]);\nvar DEFAULT_RENDER_SPEED = 5;\n/**\n* Front-end Visual Model engine, directly operate D3 SVG\n*/\n\nvar VisualModel =\n/*#__PURE__*/\nfunction () {\n  /**\n  * related data model\n  * @type {DataModel}\n  */\n\n  /**x\n  * HTML SVG Element\n  */\n\n  /**\n  * SVG view size\n  */\n\n  /**\n  * D3 force layout controller\n  */\n\n  /**\n  * D3 force layout config\n  */\n\n  /**\n  * DOM Event handlers\n  */\n\n  /**\n  * D3 SVG zoom controller\n  */\n\n  /**\n  * Render speed\n  * @type {number}\n  */\n\n  /**\n  * Since some task need to be done AFTER TICK, so we use queue\n  * @type {Array<object>}\n  */\n\n  /**\n  * Store render record\n  * @type {object}\n  */\n\n  /**\n  * Node Popover Detail dialogs controller\n  * @type {NodeDetailController}\n  */\n\n  /**\n  * Mark if apply layout persistence automatically\n  * @type {boolean}\n  */\n\n  /**\n  * Utility for highlighting any node in view hierarchy\n  * @type {NodeHighlighter}\n  */\n\n  /**\n  * Layout persistent instance\n  * @type {LayoutPersistent}\n  */\n\n  /**\n  * Check if post render expansion is being executed\n  * @type {boolean}\n  */\n\n  /**\n  * constructor receive a HTML element, create SVG\n  * @param {object} initialServerData - An object contains all Node Info\n  * @param {object} domElement - The ROOT element\n  * @param {number} width - initial width\n  * @param {number} height - initial height\n  * @param {boolean} persistence - Enable or Disable the layout persistence\n  */\n  function VisualModel(initialServerData, domElement) {\n    var _this = this;\n\n    var width = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"100%\";\n    var height = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"70vh\";\n    var persistence = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    (0, _classCallCheck2.default)(this, VisualModel);\n    (0, _defineProperty2.default)(this, \"dataModel\", null);\n    (0, _defineProperty2.default)(this, \"svg\", {\n      outerWrapper: null,\n      loadingMask: null,\n      root: null,\n      container: null,\n      nodes: null,\n      services: null,\n      links: null,\n      hulls: null\n    });\n    (0, _defineProperty2.default)(this, \"size\", {\n      width: 0,\n      height: 0\n    });\n    (0, _defineProperty2.default)(this, \"force\", null);\n    (0, _defineProperty2.default)(this, \"forceConfig\", {\n      centerForce: null,\n      centerRadialForce: null\n    });\n    (0, _defineProperty2.default)(this, \"eventHandlers\", {\n      node: {\n        drag: null\n      },\n      hull: {\n        drag: null\n      }\n    });\n    (0, _defineProperty2.default)(this, \"zoom\", d3.zoom().on(\"zoom\", function () {\n      return _this.zoomed();\n    }));\n    (0, _defineProperty2.default)(this, \"renderSpeed\", 5);\n    (0, _defineProperty2.default)(this, \"renderQueue\", []);\n    (0, _defineProperty2.default)(this, \"renderState\", {\n      initialTickEnd: false,\n      globalRendering: false,\n      nodeDragStarted: false,\n      hullDragStarted: false,\n      hullDragStartedPosition: {\n        x: 0,\n        y: 0\n      }\n    });\n    (0, _defineProperty2.default)(this, \"nodeDetailController\", void 0);\n    (0, _defineProperty2.default)(this, \"persistence\", false);\n    (0, _defineProperty2.default)(this, \"highlighter\", null);\n    (0, _defineProperty2.default)(this, \"layoutPersistent\", null);\n    (0, _defineProperty2.default)(this, \"postRenderExpansionFinished\", false);\n    (0, _defineProperty2.default)(this, \"showLoadingMask\", function () {\n      _this.svg.loadingMask.style(\"display\", \"\");\n    });\n    (0, _defineProperty2.default)(this, \"hideLoadingMask\", function () {\n      _this.svg.loadingMask.style(\"display\", \"none\");\n    });\n    (0, _defineProperty2.default)(this, \"restart\", function () {\n      var _this$dataModel$parse = _this.dataModel.parse(),\n          nodes = _this$dataModel$parse.nodes,\n          links = _this$dataModel$parse.links,\n          hulls = _this$dataModel$parse.hulls;\n\n      _this.svg.hulls = _this.svg.hulls.data(hulls);\n\n      _this.svg.hulls.exit().remove();\n\n      _this.svg.hulls = _this.svg.hulls.enter().append(\"path\").attr(\"class\", \"convex-hull\").style(\"fill\", function () {\n        return HULL_COLOR(Math.random());\n      }).on(\"click\", function (d) {\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n\n        _this.highlighter.toggleGlobal(d.id);\n\n        _this.loadModalData(d);\n\n        if ($detailsModal.iziModal(\"getState\") === \"closed\") {\n          $detailsModal.iziModal(\"open\");\n        }\n      }).on(\"dblclick\", function (d) {\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n\n        if (_this.canExpandByHull(d)) {\n          _this.toggleNodeByHull(d);\n        }\n      }).on(\"contextmenu\", function (d) {\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n\n        _this.showPopover(d.id);\n\n        $(\"#input-clipbook-text\").val(d.id);\n        (0, _clipbook.openClipbookAdd)();\n      }).call(_this.eventHandlers.hull.drag).merge(_this.svg.hulls);\n      _this.svg.links = _this.svg.links.data(links);\n\n      _this.svg.links.exit().remove();\n\n      _this.svg.links = _this.svg.links.enter().append(\"line\").attr(\"class\", \"node-link\").attr(\"stroke-linecap\", \"round\").merge(_this.svg.links);\n\n      _this.svg.links.style(\"display\", function (d) {\n        return d.metadata && d.metadata.required ? \"\" : \"none\";\n      });\n\n      _this.svg.nodes = _this.svg.nodes.data(nodes);\n\n      _this.svg.nodes.exit().remove();\n\n      var forceNodeEnter = _this.svg.nodes.enter().append(\"g\").attr(\"class\", \"node-wrapper\").on(\"click\", function (d) {\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n\n        _this.loadModalData(d);\n\n        if ($detailsModal.iziModal(\"getState\") === \"closed\") {\n          $detailsModal.iziModal(\"open\");\n        }\n      }).on(\"dblclick\", function (d) {\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n\n        if (_this.canExpand(d)) {\n          _this.toggleNode(d);\n        }\n      }).on(\"contextmenu\", function (d) {\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n        $(\"#input-clipbook-text\").val(d.metadata.id);\n        (0, _clipbook.openClipbookAdd)();\n      }).call(_this.eventHandlers.node.drag);\n\n      forceNodeEnter.append(\"path\").on(\"click\", function (_ref) {\n        var id = _ref.metadata.id;\n\n        _this.highlighter.toggleGlobal(id);\n      });\n      _this.svg.nodes = forceNodeEnter.merge(_this.svg.nodes);\n\n      _this.svg.nodes.select(\"path\").attr(\"d\", function (d) {\n        return _this.canExpand(d) ? (0, _icon.default)(\"cloud\").d : (0, _icon.default)(\"server\").d;\n      }).style(\"transform\", function (d) {\n        return _this.canExpand(d) ? (0, _icon.default)(\"cloud\").transform : (0, _icon.default)(\"server\").transform;\n      }).style(\"fill\", function (d) {\n        if (!d.fill) {\n          d.fill = NODE_COLOR(Math.random());\n        }\n\n        return d.fill;\n      }).style(\"display\", function (d) {\n        if (_this.dataModel.isNodeExpanded(d)) {\n          return \"none\";\n        } else {\n          return \"\";\n        }\n      });\n\n      _this.force.nodes(nodes);\n\n      _this.force.force(\"link\").links(links);\n\n      _this.force.alpha(0.3).restart();\n\n      if (_this.layoutPersistent && !_this.postRenderExpansionFinished) {\n        _this.layoutPersistent.applyPostRenderExpansion(_this);\n\n        _this.postRenderExpansionFinished = true;\n      }\n    });\n    (0, _defineProperty2.default)(this, \"zoomed\", function () {\n      _this.svg.container.attr(\"transform\", d3.event.transform);\n\n      _this.applyLayoutPersistence(); // remove all switch\n\n\n      _this.nodeDetailController && _this.nodeDetailController.hideAllPopover();\n    });\n    (0, _defineProperty2.default)(this, \"ticked\", function () {\n      // speed-up rendering\n      for (var i = 0; i < _this.renderSpeed; i++) {\n        _this.force.tick();\n      }\n\n      _this.svg.hulls.data(_this.dataModel.updateHullCoordinate()).attr(\"d\", function (d) {\n        return d.path;\n      });\n\n      _this.svg.links.attr(\"x1\", function (d) {\n        return d.source.x;\n      }).attr(\"y1\", function (d) {\n        return d.source.y;\n      }).attr(\"x2\", function (d) {\n        return d.target.x;\n      }).attr(\"y2\", function (d) {\n        return d.target.y;\n      });\n\n      _this.svg.nodes.attr(\"transform\", function (d) {\n        return \"translate(\".concat(d.x, \", \").concat(d.y, \")\");\n      });\n    });\n    (0, _defineProperty2.default)(this, \"tickEnd\", function () {\n      _this.renderSpeed = DEFAULT_RENDER_SPEED; // \"FREEZE\" node\n\n      _this.svg.nodes.attr(\"transform\", function (d) {\n        d[\"fx\"] = d.x;\n        d[\"fy\"] = d.y;\n        return \"translate(\".concat(d.x, \", \").concat(d.y, \")\");\n      }); // apply fist-time only operations\n\n\n      if (!_this.renderState.initialTickEnd) {\n        _this.renderState.initialTickEnd = true; // Changer to Radial Force to prevent collision of Hulls\n\n        _this.force = _this.force.force(\"center\", _this.forceConfig.centerRadialForce);\n      }\n\n      _this.stopRendering(); // execute UI tasks in queue\n\n\n      _this.executeRenderQueueTask();\n    });\n    (0, _defineProperty2.default)(this, \"executeRenderQueueTask\", function () {\n      var newTask = _this.renderQueue.pop();\n\n      if (newTask) {\n        newTask.run && newTask.run();\n\n        _this.executeRenderQueueTask();\n      }\n    });\n    (0, _defineProperty2.default)(this, \"startRendering\", function () {});\n    (0, _defineProperty2.default)(this, \"stopRendering\", function () {\n      _this.applyLayoutPersistence();\n    });\n    (0, _defineProperty2.default)(this, \"applyLayoutPersistence\", function () {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (_this.persistence || force) {\n        var layoutPersistent = new _layoutPersistent.default();\n        layoutPersistent.backup(_this);\n        var backupData = layoutPersistent.parse();\n        localStorage.setItem(_consts.LP_LOCALSTORAGE_KEY, backupData);\n      }\n    });\n    (0, _defineProperty2.default)(this, \"canRequestRender\", function () {\n      return _this.renderQueue.length === 0 && !_this.renderState.nodeDragStarted && !_this.renderState.hullDragStarted && !_this.renderState.globalRendering && _this.renderState.initialTickEnd;\n    });\n    (0, _defineProperty2.default)(this, \"canExpandByHull\", function (hullElement) {\n      return _this.canExpand(_this.dataModel.nodeFetcher(hullElement.id, true));\n    });\n    (0, _defineProperty2.default)(this, \"canExpand\", function (_ref2) {\n      var node = _ref2.metadata;\n      return node && _this.dataModel.canExpand(node);\n    });\n    (0, _defineProperty2.default)(this, \"toggleNodeByHull\", function (hullElement) {\n      _this.toggleNode(_this.dataModel.nodeFetcher(hullElement.id, true));\n    });\n    (0, _defineProperty2.default)(this, \"toggleNode\", function (nodeWrapper) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (force || _this.canRequestRender()) {\n        if (_this.dataModel.isNodeExpanded(nodeWrapper)) {\n          // IF ALREADY EXPAND, WE SHRINK\n          _this.nodeDetailController.markSwitchHidden(nodeWrapper.metadata.id);\n\n          _this.dataModel.shrinkNode(nodeWrapper);\n\n          _this.restart();\n        } else {\n          // WE EXPAND!!\n          if (!nodeWrapper.dragged && !nodeWrapper.draggedNotGroup) {\n            _this.renderSpeed = 15;\n\n            _this.dataModel.prepareSpace(nodeWrapper);\n\n            _this.restart();\n\n            _this.renderQueue.push({\n              type: \"DELAYED_EXPAND_RENDERING\",\n              run: function run() {\n                // restore expand space\n                _this.dataModel.prepareSpaceDone(nodeWrapper);\n\n                _this.dataModel.expandNode(nodeWrapper);\n\n                _this.restart();\n              }\n            });\n          } else {\n            _this.dataModel.expandNode(nodeWrapper);\n\n            _this.restart();\n          }\n        }\n      }\n    });\n    (0, _defineProperty2.default)(this, \"nodeDragStart\", function () {\n      if (_this.canRequestRender()) {\n        _this.force.alphaTarget(0.3).restart();\n\n        _this.renderState.nodeDragStarted = true;\n      }\n    });\n    (0, _defineProperty2.default)(this, \"nodeDragMove\", function (d) {\n      if (_this.renderState.nodeDragStarted) {\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n      }\n    });\n    (0, _defineProperty2.default)(this, \"nodeDragEnd\", function (d) {\n      if (_this.renderState.nodeDragStarted) {\n        _this.force.alphaTarget(0);\n\n        _this.force.stop(); // assign permanent x, y\n\n\n        d.x = d.fx;\n        d.y = d.fy; // Clean force velocity, prevent bounce\n\n        d.vx = 0;\n        d.vy = 0; // mark it is being dragged\n\n        d.dragged = true;\n        d.draggedNotGroup = true;\n      }\n\n      _this.renderState.nodeDragStarted = false;\n    });\n    (0, _defineProperty2.default)(this, \"hullDragStart\", function (d, mousePosition) {\n      if (_this.canRequestRender()) {\n        _this.force.alphaTarget(0.3).restart();\n\n        _this.renderState.hullDragStarted = true; // record initial coordinate\n\n        _this.renderState.hullDragStartedPosition.x = mousePosition[0];\n        _this.renderState.hullDragStartedPosition.y = mousePosition[1];\n        d.physicalNodes.forEach(function (node) {\n          node = _this.dataModel.nodeFetcher(node.id, true); // record original position\n\n          node.__orig_x__ = node.fx || node.x;\n          node.__orig_y__ = node.fy || node.y;\n        }); // hide all popover for node\n\n        _this.hidePopover(d.id);\n      }\n    });\n    (0, _defineProperty2.default)(this, \"hullDragMove\", function (d) {\n      if (_this.renderState.hullDragStarted) {\n        var deltaX = _this.renderState.hullDragStartedPosition.x - d3.event.x;\n        var deltaY = _this.renderState.hullDragStartedPosition.y - d3.event.y;\n        d.physicalNodes.forEach(function (node) {\n          node = _this.dataModel.nodeFetcher(node.id, true);\n          var x = node.__orig_x__ - deltaX;\n          var y = node.__orig_y__ - deltaY;\n          node.fx = x;\n          node.fy = y;\n        });\n      }\n    });\n    (0, _defineProperty2.default)(this, \"hullDragEnd\", function (d) {\n      if (_this.renderState.hullDragStarted) {\n        _this.force.alphaTarget(0);\n\n        _this.force.stop();\n\n        d.physicalNodes.forEach(function (node) {\n          node = _this.dataModel.nodeFetcher(node.id, true);\n          delete node.__orig_x__;\n          delete node.__orig_y__; // assign permanent x, y\n\n          node.x = node.fx;\n          node.y = node.fy; // Clean force velocity, prevent bounce\n\n          node.vx = 0;\n          node.vy = 0; // mark it is being dragged\n\n          node.dragged = true;\n        });\n        _this.renderState.hullDragStarted = false;\n      }\n    });\n    (0, _defineProperty2.default)(this, \"showPopover\", function (nodeId) {\n      _this.nodeDetailController.show(nodeId);\n    });\n    (0, _defineProperty2.default)(this, \"hidePopover\", function (nodeId) {\n      _this.nodeDetailController.hide(nodeId);\n    });\n    (0, _defineProperty2.default)(this, \"buildBook\", function (data, tag) {\n      var $panel = $(\"<div class=\\\"panel panel-default\\\">\");\n      var $list = $(\"<div class=\\\"list-group\\\">\");\n\n      switch (tag) {\n        default:\n          $panel.append(\"<div class=\\\"panel-heading\\\"><h3 class=\\\"panel-title\\\">\" + tag + \"</h3></div>\");\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = (0, _getIterator2.default)(data[tag]), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var port = _step.value;\n              $list.append(\"<a class=\\\"list-group-item\\\">\" + port + \"</a>\");\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          $panel.append($list);\n          return $panel;\n      }\n    });\n    (0, _defineProperty2.default)(this, \"loadModalData\", function (d) {\n      // Processing.\n      var $data = $(\"#details-modal-data\");\n      $data.html(null);\n\n      if (\"hullNodes\" in d) {\n        // Hull node\n        $detailsModal.find(\".iziModal-header-title\").text(d.id);\n        $detailsModal.attr(\"current\", d.id);\n      } else {\n        // Standard node\n        var data = d.metadata;\n        $detailsModal.find(\".iziModal-header-title\").text(data.id);\n        $detailsModal.attr(\"current\", data.id);\n\n        switch (data.type) {\n          default:\n            // hasBidirectionalPort\n            if (\"hasBidirectionalPort\" in data) {\n              $data.append(_this.buildBook(data, \"hasBidirectionalPort\"));\n            } // hasService\n\n\n            if (\"hasService\" in data) {\n              $data.append(_this.buildBook(data, \"hasService\"));\n            }\n\n            break;\n        }\n      }\n    });\n    (0, _defineProperty2.default)(this, \"backgroundClickEvent\", function () {\n      d3.event.preventDefault();\n      d3.event.stopPropagation();\n\n      _this.highlighter.hide();\n    });\n    this.size.width = width;\n    this.size.height = height;\n    this.svg.outerWrapper = d3.select(domElement).insert(\"div\", \":first-child\").attr(\"class\", \"stackv-graphic\").style(\"width\", \"\".concat(width)).style(\"height\", \"\".concat(height));\n    this.svg.loadingMask = this.svg.outerWrapper.append(\"div\").attr(\"class\", \"loading-mask\");\n    this.svg.loadingMask.append(\"img\").attr(\"src\", \"/StackV-web/img/spinner.svg\");\n    this.svg.loadingMask.append(\"span\").text(\"Render in progress\");\n    this.svg.root = this.svg.outerWrapper.insert(\"svg\", \":first-child\").attr(\"width\", this.size.width).attr(\"height\", this.size.height).on(\"click\", this.backgroundClickEvent).call(this.zoom);\n    this.svg.container = this.svg.root.append(\"g\").attr(\"class\", \"container\");\n\n    if (this.layoutPersistent) {\n      this.layoutPersistent.applyZoomLevel(this);\n    }\n\n    this.svg.hulls = this.svg.container.append(\"g\").attr(\"class\", \"hulls\").selectAll(\".convex-hull\");\n    this.svg.nodes = this.svg.container.append(\"g\").attr(\"class\", \"nodes\").selectAll(\".node-wrapper\");\n    this.svg.services = this.svg.container.append(\"g\").attr(\"class\", \"services\").selectAll(\".node-services\");\n    this.svg.links = this.svg.container.append(\"g\").attr(\"class\", \"links\").selectAll(\".node-links\");\n    this.forceConfig.centerForce = d3.forceCenter(width / 2, height / 2);\n    this.forceConfig.centerRadialForce = d3.forceRadial(100, width / 2, height / 2);\n    var nodeDragEventHandler = new _SVDragEvent.default({\n      dragStart: this.nodeDragStart,\n      dragMove: this.nodeDragMove,\n      dragEnd: this.nodeDragEnd\n    });\n    this.eventHandlers.node.drag = d3.drag().on(\"start\", nodeDragEventHandler.dragStartEvent()).on(\"drag\", nodeDragEventHandler.dragMoveEvent()).on(\"end\", nodeDragEventHandler.dragEndEvent());\n    var self = this;\n    var hullDragEventHandler = new _SVDragEvent.default({\n      dragStart: function dragStart(d) {\n        self.hullDragStart(d, d3.mouse(this));\n      },\n      dragMove: this.hullDragMove,\n      dragEnd: this.hullDragEnd\n    });\n    this.eventHandlers.hull.drag = d3.drag().on(\"start\", hullDragEventHandler.dragStartEvent()).on(\"drag\", hullDragEventHandler.dragMoveEvent()).on(\"end\", hullDragEventHandler.dragEndEvent());\n    this.force = d3.forceSimulation().force(\"link\", d3.forceLink().distance(function (d) {\n      return d.metadata.length;\n    }).strength(function (d) {\n      return d.metadata.strength;\n    })).force(\"charge\", d3.forceManyBody()).force(\"collision\", d3.forceCollide().radius(function (d) {\n      return d.metadata.renderConfig[\"collisionRadius\"];\n    })).force(\"center\", this.forceConfig.centerForce).on(\"end\", this.tickEnd).on(\"tick\", this.ticked); // set up hooks\n\n    var forceRestart = this.force.restart;\n\n    this.force.restart = function () {\n      forceRestart();\n\n      _this.startRendering();\n    };\n\n    var forceStop = this.force.stop;\n\n    this.force.stop = function () {\n      forceStop();\n\n      _this.stopRendering();\n    };\n\n    this.persistence = persistence;\n    this.highlighter = new _highlighter.default(this);\n    this.renderQueue.push({\n      type: \"INITIAL_RENDER_DONE\",\n      run: function run() {\n        _this.hideLoadingMask();\n      }\n    }); // Let UI render first, then calculate\n\n    this.dataModel = new _dataModel.default(initialServerData);\n\n    if (this.persistence) {\n      var localLayoutData = localStorage.getItem(_consts.LP_LOCALSTORAGE_KEY);\n\n      if (localLayoutData) {\n        this.layoutPersistent = new _layoutPersistent.default();\n        this.layoutPersistent.read(localLayoutData);\n        this.layoutPersistent.apply(this);\n      }\n    }\n\n    this.nodeDetailController = new _controller.default(this);\n    var detailsConfig = {\n      title: \"Details\",\n      headerColor: \"#3e4d5f\",\n      width: \"50vh\",\n      transitionIn: \"fadeInDown\",\n      transitionOut: \"fadeOutUp\",\n      top: \"104px\",\n      overlay: false,\n      onClosed: function onClosed() {\n        window.view.highlighter.hide();\n      }\n    };\n    $detailsModal.iziModal(detailsConfig);\n  }\n\n  (0, _createClass2.default)(VisualModel, [{\n    key: \"update\",\n\n    /**\n    * Provide new data\n    * @param {object} latestServerData - latest server raw data\n    */\n    value: function update(latestServerData) {\n      var _this2 = this;\n\n      var removeNodeIdList = this.dataModel.update(latestServerData); // remove selection\n\n      removeNodeIdList.forEach(function (nodeId) {\n        return _this2.highlighter.hide(nodeId);\n      });\n      this.restart();\n    }\n  }]);\n  return VisualModel;\n}();\n\nvar _default = VisualModel;\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/main/webapp/visual/visual-model/visual-model.js?");

/***/ })

}]);