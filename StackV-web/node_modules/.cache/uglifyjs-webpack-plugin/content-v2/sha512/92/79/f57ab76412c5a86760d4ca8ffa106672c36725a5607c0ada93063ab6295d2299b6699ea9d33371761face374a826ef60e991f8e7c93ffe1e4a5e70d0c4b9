{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{439:function(t,e,n){\"use strict\";var r=n(123),a=n(14);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var o=a(n(128)),i=a(n(441)),s=a(n(440)),l=a(n(442)),d=r(n(177)),u=n(187),c=a(n(438)),h=a(n(477)),f=a(n(476)),p=a(n(475)),v=n(452),g=a(n(451)),y=a(n(456)),m=$(\"#details-modal\"),w=d.scaleOrdinal([\"#63a4ff\"]),k=d.scaleOrdinal([\"rgba(26, 35, 126, 0.85)\"]),x=5,_=function(){function t(e,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"100%\",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"70vh\",_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(0,i.default)(this,t),(0,l.default)(this,\"dataModel\",null),(0,l.default)(this,\"svg\",{outerWrapper:null,loadingMask:null,root:null,container:null,nodes:null,services:null,links:null,hulls:null}),(0,l.default)(this,\"size\",{width:0,height:0}),(0,l.default)(this,\"force\",null),(0,l.default)(this,\"forceConfig\",{centerForce:null,centerRadialForce:null}),(0,l.default)(this,\"eventHandlers\",{node:{drag:null},hull:{drag:null}}),(0,l.default)(this,\"zoom\",d.zoom().on(\"zoom\",function(){return r.zoomed()})),(0,l.default)(this,\"renderSpeed\",5),(0,l.default)(this,\"renderQueue\",[]),(0,l.default)(this,\"renderState\",{initialTickEnd:!1,globalRendering:!1,nodeDragStarted:!1,hullDragStarted:!1,hullDragStartedPosition:{x:0,y:0}}),(0,l.default)(this,\"nodeDetailController\",void 0),(0,l.default)(this,\"persistence\",!1),(0,l.default)(this,\"highlighter\",null),(0,l.default)(this,\"layoutPersistent\",null),(0,l.default)(this,\"postRenderExpansionFinished\",!1),(0,l.default)(this,\"showLoadingMask\",function(){r.svg.loadingMask.style(\"display\",\"\")}),(0,l.default)(this,\"hideLoadingMask\",function(){r.svg.loadingMask.style(\"display\",\"none\")}),(0,l.default)(this,\"restart\",function(){var t=r.dataModel.parse(),e=t.nodes,n=t.links,a=t.hulls;r.svg.hulls=r.svg.hulls.data(a),r.svg.hulls.exit().remove(),r.svg.hulls=r.svg.hulls.enter().append(\"path\").attr(\"class\",\"convex-hull\").style(\"fill\",function(){return k(Math.random())}).on(\"click\",function(t){d.event.preventDefault(),d.event.stopPropagation(),r.highlighter.toggleGlobal(t.id),r.loadModalData(t),\"closed\"===m.iziModal(\"getState\")&&m.iziModal(\"open\")}).on(\"dblclick\",function(t){d.event.preventDefault(),d.event.stopPropagation(),r.canExpandByHull(t)&&r.toggleNodeByHull(t)}).on(\"contextmenu\",function(t){d.event.preventDefault(),d.event.stopPropagation(),r.showPopover(t.id),$(\"#input-clipbook-text\").val(t.id),(0,u.openClipbookAdd)()}).call(r.eventHandlers.hull.drag).merge(r.svg.hulls),r.svg.links=r.svg.links.data(n),r.svg.links.exit().remove(),r.svg.links=r.svg.links.enter().append(\"line\").attr(\"class\",\"node-link\").attr(\"stroke-linecap\",\"round\").merge(r.svg.links),r.svg.links.style(\"display\",function(t){return t.metadata&&t.metadata.required?\"\":\"none\"}),r.svg.nodes=r.svg.nodes.data(e),r.svg.nodes.exit().remove();var o=r.svg.nodes.enter().append(\"g\").attr(\"class\",\"node-wrapper\").on(\"click\",function(t){d.event.preventDefault(),d.event.stopPropagation(),r.loadModalData(t),\"closed\"===m.iziModal(\"getState\")&&m.iziModal(\"open\")}).on(\"dblclick\",function(t){d.event.preventDefault(),d.event.stopPropagation(),r.canExpand(t)&&r.toggleNode(t)}).on(\"contextmenu\",function(t){d.event.preventDefault(),d.event.stopPropagation(),$(\"#input-clipbook-text\").val(t.metadata.id),(0,u.openClipbookAdd)()}).call(r.eventHandlers.node.drag);o.append(\"path\").on(\"click\",function(t){var e=t.metadata.id;r.highlighter.toggleGlobal(e)}),r.svg.nodes=o.merge(r.svg.nodes),r.svg.nodes.select(\"path\").attr(\"d\",function(t){return r.canExpand(t)?(0,h.default)(\"cloud\").d:(0,h.default)(\"server\").d}).style(\"transform\",function(t){return r.canExpand(t)?(0,h.default)(\"cloud\").transform:(0,h.default)(\"server\").transform}).style(\"fill\",function(t){return t.fill||(t.fill=w(Math.random())),t.fill}).style(\"display\",function(t){return r.dataModel.isNodeExpanded(t)?\"none\":\"\"}),r.force.nodes(e),r.force.force(\"link\").links(n),r.force.alpha(.3).restart(),r.layoutPersistent&&!r.postRenderExpansionFinished&&(r.layoutPersistent.applyPostRenderExpansion(r),r.postRenderExpansionFinished=!0)}),(0,l.default)(this,\"zoomed\",function(){r.svg.container.attr(\"transform\",d.event.transform),r.applyLayoutPersistence(),r.nodeDetailController&&r.nodeDetailController.hideAllPopover()}),(0,l.default)(this,\"ticked\",function(){for(var t=0;t<r.renderSpeed;t++)r.force.tick();r.svg.hulls.data(r.dataModel.updateHullCoordinate()).attr(\"d\",function(t){return t.path}),r.svg.links.attr(\"x1\",function(t){return t.source.x}).attr(\"y1\",function(t){return t.source.y}).attr(\"x2\",function(t){return t.target.x}).attr(\"y2\",function(t){return t.target.y}),r.svg.nodes.attr(\"transform\",function(t){return\"translate(\".concat(t.x,\", \").concat(t.y,\")\")})}),(0,l.default)(this,\"tickEnd\",function(){r.renderSpeed=x,r.svg.nodes.attr(\"transform\",function(t){return t.fx=t.x,t.fy=t.y,\"translate(\".concat(t.x,\", \").concat(t.y,\")\")}),r.renderState.initialTickEnd||(r.renderState.initialTickEnd=!0,r.force=r.force.force(\"center\",r.forceConfig.centerRadialForce)),r.stopRendering(),r.executeRenderQueueTask()}),(0,l.default)(this,\"executeRenderQueueTask\",function(){var t=r.renderQueue.pop();t&&(t.run&&t.run(),r.executeRenderQueueTask())}),(0,l.default)(this,\"startRendering\",function(){}),(0,l.default)(this,\"stopRendering\",function(){r.applyLayoutPersistence()}),(0,l.default)(this,\"applyLayoutPersistence\",function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.persistence||t){var e=new p.default;e.backup(r);var n=e.parse();localStorage.setItem(v.LP_LOCALSTORAGE_KEY,n)}}),(0,l.default)(this,\"canRequestRender\",function(){return 0===r.renderQueue.length&&!r.renderState.nodeDragStarted&&!r.renderState.hullDragStarted&&!r.renderState.globalRendering&&r.renderState.initialTickEnd}),(0,l.default)(this,\"canExpandByHull\",function(t){return r.canExpand(r.dataModel.nodeFetcher(t.id,!0))}),(0,l.default)(this,\"canExpand\",function(t){var e=t.metadata;return e&&r.dataModel.canExpand(e)}),(0,l.default)(this,\"toggleNodeByHull\",function(t){r.toggleNode(r.dataModel.nodeFetcher(t.id,!0))}),(0,l.default)(this,\"toggleNode\",function(t){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||r.canRequestRender())&&(r.dataModel.isNodeExpanded(t)?(r.nodeDetailController.markSwitchHidden(t.metadata.id),r.dataModel.shrinkNode(t),r.restart()):t.dragged||t.draggedNotGroup?(r.dataModel.expandNode(t),r.restart()):(r.renderSpeed=15,r.dataModel.prepareSpace(t),r.restart(),r.renderQueue.push({type:\"DELAYED_EXPAND_RENDERING\",run:function(){r.dataModel.prepareSpaceDone(t),r.dataModel.expandNode(t),r.restart()}})))}),(0,l.default)(this,\"nodeDragStart\",function(){r.canRequestRender()&&(r.force.alphaTarget(.3).restart(),r.renderState.nodeDragStarted=!0)}),(0,l.default)(this,\"nodeDragMove\",function(t){r.renderState.nodeDragStarted&&(t.fx=d.event.x,t.fy=d.event.y)}),(0,l.default)(this,\"nodeDragEnd\",function(t){r.renderState.nodeDragStarted&&(r.force.alphaTarget(0),r.force.stop(),t.x=t.fx,t.y=t.fy,t.vx=0,t.vy=0,t.dragged=!0,t.draggedNotGroup=!0),r.renderState.nodeDragStarted=!1}),(0,l.default)(this,\"hullDragStart\",function(t,e){r.canRequestRender()&&(r.force.alphaTarget(.3).restart(),r.renderState.hullDragStarted=!0,r.renderState.hullDragStartedPosition.x=e[0],r.renderState.hullDragStartedPosition.y=e[1],t.physicalNodes.forEach(function(t){(t=r.dataModel.nodeFetcher(t.id,!0)).__orig_x__=t.fx||t.x,t.__orig_y__=t.fy||t.y}),r.hidePopover(t.id))}),(0,l.default)(this,\"hullDragMove\",function(t){if(r.renderState.hullDragStarted){var e=r.renderState.hullDragStartedPosition.x-d.event.x,n=r.renderState.hullDragStartedPosition.y-d.event.y;t.physicalNodes.forEach(function(t){var a=(t=r.dataModel.nodeFetcher(t.id,!0)).__orig_x__-e,o=t.__orig_y__-n;t.fx=a,t.fy=o})}}),(0,l.default)(this,\"hullDragEnd\",function(t){r.renderState.hullDragStarted&&(r.force.alphaTarget(0),r.force.stop(),t.physicalNodes.forEach(function(t){delete(t=r.dataModel.nodeFetcher(t.id,!0)).__orig_x__,delete t.__orig_y__,t.x=t.fx,t.y=t.fy,t.vx=0,t.vy=0,t.dragged=!0}),r.renderState.hullDragStarted=!1)}),(0,l.default)(this,\"showPopover\",function(t){r.nodeDetailController.show(t)}),(0,l.default)(this,\"hidePopover\",function(t){r.nodeDetailController.hide(t)}),(0,l.default)(this,\"buildBook\",function(t,e){var n=$('<div class=\"panel panel-default\">'),r=$('<div class=\"list-group\">');n.append('<div class=\"panel-heading\"><h3 class=\"panel-title\">'+e+\"</h3></div>\");var a=!0,i=!1,s=void 0;try{for(var l,d=(0,o.default)(t[e]);!(a=(l=d.next()).done);a=!0){var u=l.value;r.append('<a class=\"list-group-item\">'+u+\"</a>\")}}catch(t){i=!0,s=t}finally{try{a||null==d.return||d.return()}finally{if(i)throw s}}return n.append(r),n}),(0,l.default)(this,\"loadModalData\",function(t){var e=$(\"#details-modal-data\");if(e.html(null),\"hullNodes\"in t)m.find(\".iziModal-header-title\").text(t.id),m.attr(\"current\",t.id);else{var n=t.metadata;m.find(\".iziModal-header-title\").text(n.id),m.attr(\"current\",n.id),n.type,\"hasBidirectionalPort\"in n&&e.append(r.buildBook(n,\"hasBidirectionalPort\")),\"hasService\"in n&&e.append(r.buildBook(n,\"hasService\"))}}),(0,l.default)(this,\"backgroundClickEvent\",function(){d.event.preventDefault(),d.event.stopPropagation(),r.highlighter.hide()}),this.size.width=a,this.size.height=s,this.svg.outerWrapper=d.select(n).insert(\"div\",\":first-child\").attr(\"class\",\"stackv-graphic\").style(\"width\",\"\".concat(a)).style(\"height\",\"\".concat(s)),this.svg.loadingMask=this.svg.outerWrapper.append(\"div\").attr(\"class\",\"loading-mask\"),this.svg.loadingMask.append(\"img\").attr(\"src\",\"/StackV-web/img/spinner.svg\"),this.svg.loadingMask.append(\"span\").text(\"Render in progress\"),this.svg.root=this.svg.outerWrapper.insert(\"svg\",\":first-child\").attr(\"width\",this.size.width).attr(\"height\",this.size.height).on(\"click\",this.backgroundClickEvent).call(this.zoom),this.svg.container=this.svg.root.append(\"g\").attr(\"class\",\"container\"),this.layoutPersistent&&this.layoutPersistent.applyZoomLevel(this),this.svg.hulls=this.svg.container.append(\"g\").attr(\"class\",\"hulls\").selectAll(\".convex-hull\"),this.svg.nodes=this.svg.container.append(\"g\").attr(\"class\",\"nodes\").selectAll(\".node-wrapper\"),this.svg.services=this.svg.container.append(\"g\").attr(\"class\",\"services\").selectAll(\".node-services\"),this.svg.links=this.svg.container.append(\"g\").attr(\"class\",\"links\").selectAll(\".node-links\"),this.forceConfig.centerForce=d.forceCenter(a/2,s/2),this.forceConfig.centerRadialForce=d.forceRadial(100,a/2,s/2);var D=new f.default({dragStart:this.nodeDragStart,dragMove:this.nodeDragMove,dragEnd:this.nodeDragEnd});this.eventHandlers.node.drag=d.drag().on(\"start\",D.dragStartEvent()).on(\"drag\",D.dragMoveEvent()).on(\"end\",D.dragEndEvent());var E=this,S=new f.default({dragStart:function(t){E.hullDragStart(t,d.mouse(this))},dragMove:this.hullDragMove,dragEnd:this.hullDragEnd});this.eventHandlers.hull.drag=d.drag().on(\"start\",S.dragStartEvent()).on(\"drag\",S.dragMoveEvent()).on(\"end\",S.dragEndEvent()),this.force=d.forceSimulation().force(\"link\",d.forceLink().distance(function(t){return t.metadata.length}).strength(function(t){return t.metadata.strength})).force(\"charge\",d.forceManyBody()).force(\"collision\",d.forceCollide().radius(function(t){return t.metadata.renderConfig.collisionRadius})).force(\"center\",this.forceConfig.centerForce).on(\"end\",this.tickEnd).on(\"tick\",this.ticked);var M=this.force.restart;this.force.restart=function(){M(),r.startRendering()};var P=this.force.stop;if(this.force.stop=function(){P(),r.stopRendering()},this.persistence=_,this.highlighter=new y.default(this),this.renderQueue.push({type:\"INITIAL_RENDER_DONE\",run:function(){r.hideLoadingMask()}}),this.dataModel=new c.default(e),this.persistence){var O=localStorage.getItem(v.LP_LOCALSTORAGE_KEY);O&&(this.layoutPersistent=new p.default,this.layoutPersistent.read(O),this.layoutPersistent.apply(this))}this.nodeDetailController=new g.default(this);var b={title:\"Details\",headerColor:\"#3e4d5f\",width:\"50vh\",transitionIn:\"fadeInDown\",transitionOut:\"fadeOutUp\",top:\"104px\",overlay:!1,onClosed:function(){window.view.highlighter.hide()}};m.iziModal(b)}return(0,s.default)(t,[{key:\"update\",value:function(t){var e=this;this.dataModel.update(t).forEach(function(t){return e.highlighter.hide(t)}),this.restart()}}]),t}();e.default=_},444:function(t,e,n){var r=n(471),a=n(449);function o(e){return t.exports=o=a?r:function(t){return t.__proto__||r(t)},o(e)}t.exports=o},446:function(t,e,n){\"use strict\";var r=n(14);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var a=r(n(441)),o=r(n(440)),i=r(n(442)),s=(r(n(451)),function(){function t(e,n){var r=this;if((0,a.default)(this,t),(0,i.default)(this,\"nodeId\",void 0),(0,i.default)(this,\"hullData\",void 0),(0,i.default)(this,\"nodeData\",void 0),(0,i.default)(this,\"controller\",void 0),(0,i.default)(this,\"container\",void 0),this.nodeId=e,this.controller=n,this.container=null,this.controller.svg.hulls.each(function(t){t.id===r.nodeId&&(r.hullData=t,r.nodeData=r.controller.nodeFetcher(t.id,!0))}),(this instanceof t?this.constructor:void 0)===t)throw new TypeError(\"NodeDetail is a abstract class, DO NOT CONSTRUCT\")}return(0,o.default)(t,[{key:\"show\",value:function(){var t=this;if(!this.container&&this.dataValid()){var e=this.popoverCoordinate();this.container=this.controller.switchContainer.append(\"div\").attr(\"id\",this.containerId()).attr(\"class\",this.containerClass()).style(\"left\",\"\".concat(e.x,\"px\")).style(\"top\",\"\".concat(e.y,\"px\")).style(\"min-width\",this.containerWidth()),this.container.append(\"div\").attr(\"class\",\"ui-buttons\").append(\"div\").attr(\"class\",\"close-x\").on(\"click\",function(){t.hide(t.nodeId)});var n=this.container.append(\"div\").attr(\"class\",this.contentClass());this.prepareContent(n),this.container.transition().duration(250).style(\"opacity\",1)}}},{key:\"hide\",value:function(){var t=this;this.container&&this.container.transition().duration(250).style(\"opacity\",0).on(\"end\",function(){return t.container.remove()})}},{key:\"popoverCoordinate\",value:function(){throw new Error(\"Abstract function NOT OVERRIDDEN!!\")}},{key:\"containerId\",value:function(){throw new Error(\"Abstract function NOT OVERRIDDEN!!\")}},{key:\"containerClass\",value:function(){throw new Error(\"Abstract function NOT OVERRIDDEN!!\")}},{key:\"contentClass\",value:function(){throw new Error(\"Abstract function NOT OVERRIDDEN!!\")}},{key:\"containerWidth\",value:function(){throw new Error(\"Abstract function NOT OVERRIDDEN!!\")}},{key:\"dataValid\",value:function(){throw new Error(\"Abstract function NOT OVERRIDDEN!!\")}},{key:\"prepareContent\",value:function(t){throw new Error(\"Abstract function NOT OVERRIDDEN!!\")}}]),t}());e.default=s},447:function(t,e,n){var r=n(461),a=n(458);t.exports=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=r(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}},448:function(t,e,n){var r=n(179),a=n(465),o=(n(444),n(462));function i(e,n,s){return\"undefined\"!=typeof Reflect&&a?t.exports=i=a:t.exports=i=function(t,e,n){var a=o(t,e);if(a){var i=r(a,e);return i.get?i.get.call(n):i.value}},i(e,n,s||e)}t.exports=i},449:function(t,e,n){t.exports=n(468)},450:function(t,e,n){var r=n(124),a=n(472);t.exports=function(t,e){return!e||\"object\"!==r(e)&&\"function\"!=typeof e?a(t):e}},451:function(t,e,n){\"use strict\";var r=n(14);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var a=r(n(441)),o=r(n(440)),i=r(n(442)),s=r(n(473)),l=r(n(457)),d=function(){function t(e){(0,a.default)(this,t),(0,i.default)(this,\"switchList\",{}),(0,i.default)(this,\"serviceList\",{}),(0,i.default)(this,\"svg\",void 0),(0,i.default)(this,\"nodeFetcher\",void 0),(0,i.default)(this,\"visualModel\",void 0),(0,i.default)(this,\"switchContainer\",void 0),this.visualModel=e,this.svg=e.svg,this.nodeFetcher=e.dataModel.nodeFetcher;var n=this.svg.outerWrapper.append(\"div\").attr(\"class\",\"popover-container\");this.switchContainer=n.append(\"div\").attr(\"class\",\"popover-switches\")}return(0,o.default)(t,[{key:\"showNetworkSwitch\",value:function(t){if(!this.switchList.hasOwnProperty(t)){var e=new s.default(t,this);e.show(),this.switchList[t]=e}}},{key:\"hideNetworkSwitch\",value:function(t){this.switchList.hasOwnProperty(t)||new s.default(t,this).hide()}},{key:\"markSwitchHidden\",value:function(t){this.switchList.hasOwnProperty(t)&&delete this.switchList[t]}},{key:\"hideAllNetworkSwitch\",value:function(){for(var t in this.switchList)this.switchList.hasOwnProperty(t)&&this.switchList[t].hide()}},{key:\"showServicesDialog\",value:function(t){if(!this.serviceList.hasOwnProperty(t)){var e=new l.default(t,this);e.show(),this.serviceList[t]=e}}},{key:\"hideServicesDialog\",value:function(t){this.serviceList.hasOwnProperty(t)||new l.default(t,this).hide()}},{key:\"markServicesDialogHidden\",value:function(t){this.serviceList.hasOwnProperty(t)&&delete this.serviceList[t]}},{key:\"hideAllServicesDialog\",value:function(){for(var t in this.serviceList)this.serviceList.hasOwnProperty(t)&&this.serviceList[t].hide()}},{key:\"hideAllPopover\",value:function(){this.hideAllNetworkSwitch(),this.hideAllServicesDialog()}},{key:\"show\",value:function(t){this.showNetworkSwitch(t),this.showServicesDialog(t)}},{key:\"hide\",value:function(t){this.hideNetworkSwitch(t),this.hideServicesDialog(t)}}]),t}();e.default=d},452:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.LAYOUT_PERSISTENT_KEYS=e.LP_LOCALSTORAGE_KEY=void 0;e.LP_LOCALSTORAGE_KEY=\"__UI_DATA__\";e.LAYOUT_PERSISTENT_KEYS=[\"x\",\"y\",\"dx\",\"dy\",\"vx\",\"vy\",\"fx\",\"fy\"]},456:function(t,e,n){\"use strict\";var r=n(123),a=n(14);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var o=a(n(441)),i=a(n(440)),s=a(n(442)),l=r(n(177)),d=function(){function t(e){(0,o.default)(this,t),(0,s.default)(this,\"visualModel\",void 0),(0,s.default)(this,\"visitHistory\",void 0),(0,s.default)(this,\"currentHighlightId\",void 0),this.visualModel=e}return(0,i.default)(t,[{key:\"toggleGlobal\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentHighlightId;t!==this.currentHighlightId&&(this.hide(this.currentHighlightId),this.currentHighlightId=t,this.show(this.currentHighlightId))}},{key:\"toggle\",value:function(t){this.searchNode(t).classed(\"user-highlight\")?this.hide(t):this.show(t)}},{key:\"show\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentHighlightId,e=this.searchNode(t);e&&e.classed(\"user-highlight\",!0)}},{key:\"hide\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentHighlightId,e=this.searchNode(t);e&&e.classed(\"user-highlight\",!1)}},{key:\"searchNode\",value:function(t){return this.visualModel.dataModel.isNodeExpanded(t)?(this.visualModel.svg.hulls.each(function(n){if(e)return!0;n.id===t&&(e=l.select(this))}),e||void 0):(this.visitHistory=[],l.select(this.searchNode_helper(t)));var e}},{key:\"searchNode_helper\",value:function(t){if(-1===this.visitHistory.indexOf(t)){var e;if(this.visitHistory.push(t),this.visualModel.svg.nodes.each(function(n){if(e)return!0;n.metadata&&n.metadata.id===t&&(e=l.select(this).node())}),e)return e;var n=this.visualModel.dataModel.nodeFetcher(t,!0);if(n){var r=n.id,a=n.metadata;if(r){this.visitHistory.push(r);var o=document.getElementById(\"switch-\".concat(r));if(o)return o;if(o=document.getElementById(\"switch-port-\".concat(r)))return o;if(a.hasOwnProperty(\"directParentList\")){for(var i=a.directParentList.length-1;i>=0;i--){var s=a.directParentList[i],d=this.searchNode_helper(s);if(d)return d}return this.searchNode_helper(a.isAlias)}}}}return!1}}]),t}();e.default=d},457:function(t,e,n){\"use strict\";var r=n(14);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var a=r(n(441)),o=r(n(440)),i=r(n(450)),s=r(n(444)),l=r(n(448)),d=r(n(447)),u=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(0,s.default)(e).apply(this,arguments))}return(0,d.default)(e,t),(0,o.default)(e,[{key:\"popoverCoordinate\",value:function(){var t=this.hullData.__path_raw__,e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(null,e),a=Math.max.apply(null,e),o=d3.zoomTransform(this.controller.svg.root.node()),i=(r+a)/2,s=Math.min.apply(null,n)-45/o.k;return{x:i*o.k+o.x,y:s*o.k+o.y}}},{key:\"containerId\",value:function(){return\"services-\".concat(this.nodeData.id)}},{key:\"containerClass\",value:function(){return\"services-container\"}},{key:\"contentClass\",value:function(){return\"services-ports\"}},{key:\"containerWidth\",value:function(){return\"\".concat(39*this.nodeData.metadata.hasService.length+5,\"px\")}},{key:\"dataValid\",value:function(){return this.hullData.hasOwnProperty(\"__path_raw__\")&&this.nodeData&&this.nodeData.metadata&&this.nodeData.metadata.hasOwnProperty(\"hasService\")&&this.nodeData.metadata.hasService.length>0}},{key:\"prepareContent\",value:function(t){var e=this;this.nodeData.metadata.hasService.forEach(function(n){var r=e.controller.nodeFetcher(n,!0),a=r.id,o=r.metadata;t.append(\"img\").attr(\"id\",\"service-node-\".concat(a)).attr(\"src\",\"/StackV-web/img/circle-o.svg\").on(\"contextmenu\",function(){console.log(o),d3.event.preventDefault(),d3.event.stopPropagation()})})}},{key:\"hide\",value:function(){this.controller.markServicesDialogHidden(this.nodeId),(0,l.default)((0,s.default)(e.prototype),\"hide\",this).call(this)}}]),e}(r(n(446)).default);e.default=u},458:function(t,e,n){var r=n(449);function a(e,n){return t.exports=a=r||function(t,e){return t.__proto__=e,t},a(e,n)}t.exports=a},459:function(t,e,n){var r=n(65);r(r.S,\"Object\",{create:n(130)})},460:function(t,e,n){n(459);var r=n(19).Object;t.exports=function(t,e){return r.create(t,e)}},461:function(t,e,n){t.exports=n(460)},462:function(t,e,n){var r=n(444);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},463:function(t,e,n){var r=n(125),a=n(180),o=n(38),i=n(65),s=n(59),l=n(58);i(i.S,\"Reflect\",{get:function t(e,n){var i,d,u=arguments.length<3?e:arguments[2];return l(e)===u?e[n]:(i=r.f(e,n))?o(i,\"value\")?i.value:void 0!==i.get?i.get.call(u):void 0:s(d=a(e))?t(d,n,u):void 0}})},464:function(t,e,n){n(463),t.exports=n(19).Reflect.get},465:function(t,e,n){t.exports=n(464)},466:function(t,e,n){var r=n(59),a=n(58),o=function(t,e){if(a(t),!r(e)&&null!==e)throw TypeError(e+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,e,r){try{(r=n(181)(Function.call,n(125).f(Object.prototype,\"__proto__\").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},467:function(t,e,n){var r=n(65);r(r.S,\"Object\",{setPrototypeOf:n(466).set})},468:function(t,e,n){n(467),t.exports=n(19).Object.setPrototypeOf},469:function(t,e,n){var r=n(127),a=n(180);n(129)(\"getPrototypeOf\",function(){return function(t){return a(r(t))}})},470:function(t,e,n){n(469),t.exports=n(19).Object.getPrototypeOf},471:function(t,e,n){t.exports=n(470)},472:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}},473:function(t,e,n){\"use strict\";var r=n(14);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var a=r(n(441)),o=r(n(440)),i=r(n(450)),s=r(n(444)),l=r(n(448)),d=r(n(447)),u=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(0,s.default)(e).apply(this,arguments))}return(0,d.default)(e,t),(0,o.default)(e,[{key:\"popoverCoordinate\",value:function(){var t=this.hullData.__path_raw__,e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(null,e),a=Math.max.apply(null,e),o=d3.zoomTransform(this.controller.svg.root.node()),i=(r+a)/2,s=Math.max.apply(null,n)+5/o.k;return{x:i*o.k+o.x,y:s*o.k+o.y}}},{key:\"containerId\",value:function(){return\"switch-\".concat(this.nodeData.id)}},{key:\"containerClass\",value:function(){return\"switch-container\"}},{key:\"contentClass\",value:function(){return\"switch-ports\"}},{key:\"containerWidth\",value:function(){return\"\".concat(35*this.nodeData.metadata.hasBidirectionalPort.length,\"px\")}},{key:\"dataValid\",value:function(){return this.hullData.hasOwnProperty(\"__path_raw__\")&&this.nodeData&&this.nodeData.metadata&&this.nodeData.metadata.hasOwnProperty(\"hasBidirectionalPort\")&&this.nodeData.metadata.hasBidirectionalPort.length>0}},{key:\"prepareContent\",value:function(t){var e=this;this.nodeData.metadata.hasBidirectionalPort.forEach(function(n){var r=e.controller.nodeFetcher(n,!0),a=r.id,o=r.metadata,i=o.hasOwnProperty(\"isAlias\"),s=i?\"/StackV-web/img/rj45_on.svg\":\"/StackV-web/img/rj45_off.svg\",l=t.append(\"img\").attr(\"id\",\"switch-port-\".concat(a)).attr(\"src\",s).style(\"opacity\",function(){return i?\"1\":\"0.35\"}).on(\"contextmenu\",function(){console.log(o),d3.event.preventDefault(),d3.event.stopPropagation()});i&&l.on(\"mouseenter\",function(){return e.controller.visualModel.highlighter.show(o.isAlias)}).on(\"mouseleave\",function(){return e.controller.visualModel.highlighter.hide(o.isAlias)})})}},{key:\"hide\",value:function(){this.controller.markSwitchHidden(this.nodeId),(0,l.default)((0,s.default)(e.prototype),\"hide\",this).call(this)}}]),e}(r(n(446)).default);e.default=u},474:function(t,e,n){var r,a=function(){var t=String.fromCharCode,e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\",r={};function a(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var o={compressToBase64:function(t){if(null==t)return\"\";var n=o._compress(t,6,function(t){return e.charAt(t)});switch(n.length%4){default:case 0:return n;case 1:return n+\"===\";case 2:return n+\"==\";case 3:return n+\"=\"}},decompressFromBase64:function(t){return null==t?\"\":\"\"==t?null:o._decompress(t.length,32,function(n){return a(e,t.charAt(n))})},compressToUTF16:function(e){return null==e?\"\":o._compress(e,15,function(e){return t(e+32)})+\" \"},decompressFromUTF16:function(t){return null==t?\"\":\"\"==t?null:o._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,a=e.length;r<a;r++){var i=e.charCodeAt(r);n[2*r]=i>>>8,n[2*r+1]=i%256}return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return o.decompress(e);for(var n=new Array(e.length/2),r=0,a=n.length;r<a;r++)n[r]=256*e[2*r]+e[2*r+1];var i=[];return n.forEach(function(e){i.push(t(e))}),o.decompress(i.join(\"\"))},compressToEncodedURIComponent:function(t){return null==t?\"\":o._compress(t,6,function(t){return n.charAt(t)})},decompressFromEncodedURIComponent:function(t){return null==t?\"\":\"\"==t?null:(t=t.replace(/ /g,\"+\"),o._decompress(t.length,32,function(e){return a(n,t.charAt(e))}))},compress:function(e){return o._compress(e,16,function(e){return t(e)})},_compress:function(t,e,n){if(null==t)return\"\";var r,a,o,i={},s={},l=\"\",d=\"\",u=\"\",c=2,h=3,f=2,p=[],v=0,g=0;for(o=0;o<t.length;o+=1)if(l=t.charAt(o),Object.prototype.hasOwnProperty.call(i,l)||(i[l]=h++,s[l]=!0),d=u+l,Object.prototype.hasOwnProperty.call(i,d))u=d;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)v<<=1,g==e-1?(g=0,p.push(n(v)),v=0):g++;for(a=u.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a>>=1}else{for(a=1,r=0;r<f;r++)v=v<<1|a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a>>=1}0==--c&&(c=Math.pow(2,f),f++),delete s[u]}else for(a=i[u],r=0;r<f;r++)v=v<<1|1&a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a>>=1;0==--c&&(c=Math.pow(2,f),f++),i[d]=h++,u=String(l)}if(\"\"!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)v<<=1,g==e-1?(g=0,p.push(n(v)),v=0):g++;for(a=u.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a>>=1}else{for(a=1,r=0;r<f;r++)v=v<<1|a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a>>=1}0==--c&&(c=Math.pow(2,f),f++),delete s[u]}else for(a=i[u],r=0;r<f;r++)v=v<<1|1&a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a>>=1;0==--c&&(c=Math.pow(2,f),f++)}for(a=2,r=0;r<f;r++)v=v<<1|1&a,g==e-1?(g=0,p.push(n(v)),v=0):g++,a>>=1;for(;;){if(v<<=1,g==e-1){p.push(n(v));break}g++}return p.join(\"\")},decompress:function(t){return null==t?\"\":\"\"==t?null:o._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,n,r){var a,o,i,s,l,d,u,c=[],h=4,f=4,p=3,v=\"\",g=[],y={val:r(0),position:n,index:1};for(a=0;a<3;a+=1)c[a]=a;for(i=0,l=Math.pow(2,2),d=1;d!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),i|=(s>0?1:0)*d,d<<=1;switch(i){case 0:for(i=0,l=Math.pow(2,8),d=1;d!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),i|=(s>0?1:0)*d,d<<=1;u=t(i);break;case 1:for(i=0,l=Math.pow(2,16),d=1;d!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),i|=(s>0?1:0)*d,d<<=1;u=t(i);break;case 2:return\"\"}for(c[3]=u,o=u,g.push(u);;){if(y.index>e)return\"\";for(i=0,l=Math.pow(2,p),d=1;d!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),i|=(s>0?1:0)*d,d<<=1;switch(u=i){case 0:for(i=0,l=Math.pow(2,8),d=1;d!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),i|=(s>0?1:0)*d,d<<=1;c[f++]=t(i),u=f-1,h--;break;case 1:for(i=0,l=Math.pow(2,16),d=1;d!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),i|=(s>0?1:0)*d,d<<=1;c[f++]=t(i),u=f-1,h--;break;case 2:return g.join(\"\")}if(0==h&&(h=Math.pow(2,p),p++),c[u])v=c[u];else{if(u!==f)return null;v=o+o.charAt(0)}g.push(v),c[f++]=o+v.charAt(0),o=v,0==--h&&(h=Math.pow(2,p),p++)}}};return o}();void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)},475:function(t,e,n){\"use strict\";var r=n(123),a=n(14);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var o=a(n(20)),i=a(n(176)),s=a(n(441)),l=a(n(440)),d=a(n(442)),u=r(n(177)),c=a(n(443)),h=n(452),f=r(n(474));function p(t){var e={};for(var n in t)t.hasOwnProperty(n)&&-1!==h.LAYOUT_PERSISTENT_KEYS.indexOf(n)&&(e[n]=t[n]);return(0,i.default)(e).length>0?e:null}var v=function(){function t(){(0,s.default)(this,t),(0,d.default)(this,\"persistentData\",{expandInfo:[],nodeInfo:{},zoom:{}}),(0,d.default)(this,\"postRenderExpandNodeWrapperList\",void 0)}return(0,l.default)(t,[{key:\"backup\",value:function(t){var e=t.dataModel;for(var n in this.persistentData.expandInfo=(0,i.default)(e.expandInfo),e.data)if(e.data.hasOwnProperty(n)){var r=p(e.data[n]);r&&(this.persistentData.nodeInfo[n]=r)}this.persistentData.zoom=u.zoomTransform(t.svg.root.node())}},{key:\"apply\",value:function(t){var e=this,n=t.dataModel,r=[];this.postRenderExpandNodeWrapperList=[];for(var a=this.persistentData.expandInfo.length-1;a>=0;a-=1){var o=this.persistentData.expandInfo[a],i=n.nodeFetcher(o,!0);if(i&&i.metadata){for(var s=n.childrenElementIdList(i.metadata),l=!0,d=0;d<s.length;d++){var u=s[d];if(!this.persistentData.nodeInfo.hasOwnProperty(u)){l=!1;break}}l?r.push(i):(s.forEach(function(t){return delete e.persistentData.nodeInfo[t]}),delete this.persistentData.nodeInfo[o],this.postRenderExpandNodeWrapperList.push(i))}}for(var h in this.persistentData.nodeInfo)this.persistentData.nodeInfo.hasOwnProperty(h)&&n.data.hasOwnProperty(h)&&c.default.assign(n.data[h],this.persistentData.nodeInfo[h]);r.forEach(function(t){return n.expandNode(t)})}},{key:\"applyPostRenderExpansion\",value:function(t){var e=this;t.renderQueue.push({type:\"POST_RENDER_EXPANSION\",run:function(){e.postRenderExpandNodeWrapperList.forEach(function(e){return t.toggleNode(e,!0)}),e.postRenderExpandNodeWrapperList=[]}})}},{key:\"applyZoomLevel\",value:function(t){console.log(\"restore\"),t.svg.root=t.svg.root.call(t.zoom.transform,u.zoomIdentity.translate(this.persistentData.zoom.x,this.persistentData.zoom.y).scale(this.persistentData.zoom.k)),t.svg.container.attr(\"transform\",\"translate(\".concat(this.persistentData.zoom.x,\", \").concat(this.persistentData.zoom.y,\") scale(\").concat(this.persistentData.zoom.k,\")\"))}},{key:\"parse\",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=(0,o.default)(this.persistentData);return t&&(e=f.compress(e)),e}},{key:\"read\",value:function(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t=f.decompress(t));var e=JSON.parse(t);this.validate(e)&&(this.persistentData=e)}},{key:\"validate\",value:function(){return!0}}]),t}();e.default=v},476:function(t,e,n){\"use strict\";var r=n(14);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var a=r(n(441)),o=r(n(440)),i=function(){function t(e){(0,a.default)(this,t),this.eventHandler=e,this.dragStarted=!1,this.dragMoved=!1}return(0,o.default)(t,[{key:\"dragStartEvent\",value:function(){var t=this;return function(){t.dragStarted=!0}}},{key:\"dragMoveEvent\",value:function(){var t=this;return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.dragMoved||(t.eventHandler.dragStart&&t.eventHandler.dragStart.apply(this,n),t.dragMoved=!0),t.eventHandler.dragMove&&t.eventHandler.dragMove.apply(this,n)}}},{key:\"dragEndEvent\",value:function(){var t=this;return function(){if(t.dragStarted&&t.dragMoved){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.eventHandler.dragEnd&&t.eventHandler.dragEnd.apply(this,n)}t.dragStarted=!1,t.dragMoved=!1}}}]),t}();e.default=i},477:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){return r[t]};var r={cloud:{type:\"path\",d:\"M537.585 226.56C541.725 215.836 544 204.184 544 192c0-53.019-42.981-96-96-96-19.729 0-38.065 5.954-53.316 16.159C367.042 64.248 315.288 32 256 32c-88.366 0-160 71.634-160 160 0 2.728.07 5.439.204 8.133C40.171 219.845 0 273.227 0 336c0 79.529 64.471 144 144 144h368c70.692 0 128-57.308 128-128 0-61.93-43.983-113.586-102.415-125.44z\",transform:\"scale(0.07) translate(-300px, -250px)\"},server:{type:\"path\",d:\"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z\",transform:\"scale(0.07) translate(-260px, -250px)\"}}}}]);","extractedComments":[]}